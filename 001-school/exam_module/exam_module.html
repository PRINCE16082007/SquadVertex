<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Exams Module</title>
    <!-- Bootstrap 5 CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background-color: #eef2f7;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      }
      /* Navbar styling */
      .navbar-brand {
        font-weight: bold;
        font-size: 1.5rem;
      }
      .navbar-nav .nav-link.active {
        position: relative;
        color: #fff;
        background-color: #007bff;
        border-radius: 5px;
        box-shadow: 0 0 8px rgba(0, 123, 255, 0.6);
      }
      .navbar-nav .nav-link.active::before {
        content: '';
        position: absolute;
        top: -5px;
        left: -5px;
        right: -5px;
        bottom: -5px;
        border-radius: 5px;
        border: 2px solid rgba(0, 123, 255, 0.6);
        opacity: 0.7;
        animation: glow 1.5s infinite alternate;
      }
      @keyframes glow {
        from {
          box-shadow: 0 0 8px rgba(0, 123, 255, 0.6);
        }
        to {
          box-shadow: 0 0 16px rgba(0, 123, 255, 0.8);
        }
      }
      .content-container {
        max-width: 900px;
        margin: 50px auto;
      }
      .instructions {
        font-size: 1.1rem;
        color: #555;
        line-height: 1.6;
        margin-bottom: 30px;
      }
      .btn-custom {
        min-width: 240px;
        margin: 15px;
        font-size: 1.1rem;
        padding: 12px 20px;
      }
      #statusMessage {
        font-size: 1.1rem;
        margin-top: 20px;
        text-align: center;
        color: #333;
      }
    </style>
  </head>
  <body>
    <!-- Navbar (same as your other pages) -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">SchoolMS</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarContent"
          aria-controls="navbarContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarContent">
          <ul class="navbar-nav me-auto">
            <li class="nav-item">
              <a class="nav-link" href="../admin_dashboard.html">Dashboard</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../admission/admission.html">Admissions</a>
            </li>
            <li class="nav-item">
              <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">
                Staff <span class="bi bi-lock"></span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../attendance/attendance.html">Attendance</a>
            </li>
            <li class="nav-item">
              <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">
                Classes <span class="bi bi-lock"></span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../fees_module/fees_module.html">Payment Module</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="exam_module.html">Exams</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../library/library.html">Library</a>
            </li>
            <li class="nav-item">
              <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">
                Transport <span class="bi bi-lock"></span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../hostel/hostel.html">Hostel</a>
            </li>
            <li class="nav-item">
              <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">
                Communications <span class="bi bi-lock"></span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">
                Inventory <span class="bi bi-lock"></span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../events/events.html">Events</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../admin_panel/admin_panel.html">Admin &amp; Settings panel</a>
            </li>
            <li class="nav-item">
              <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">
                Reports <span class="bi bi-lock"></span>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <div class="container content-container">
      <h1 class="mt-5 text-center">Exams Module</h1>
      <div class="instructions">
        <p>
          Welcome to the Exams Module page. Here you can manage all exam-related activities. Please note:
        </p>
        <ol>
          <li>
            <strong>Set Exam Schedule:</strong> Configure exam dates, times, and venues.
          </li>
          <li>
            <strong>Sitting Management:</strong> Organize seating arrangements for exam sittings.
          </li>
          <li>
            <strong>Print Exam Seating:</strong> Print the exam schedule along with seating details.
          </li>
        </ol>
        <p>
          <strong>Security Reminder:</strong> These options will only be enabled if the Exams Module is active.
          We check the <code>modules.exams</code> flag in the Firestore document at <code>001-school/systemSettings</code>.
          If the module is disabled, these options will remain unavailable.
        </p>
      </div>

      <!-- Buttons Section -->
      <div class="d-flex flex-column align-items-center">
        <button id="scheduleBtn" class="btn btn-primary btn-custom" disabled>
          Set Exam Schedule
        </button>
        <button id="sittingBtn" class="btn btn-info btn-custom" disabled>
          Sitting Management
        </button>
        <button id="printBtn" class="btn btn-success btn-custom" disabled>
          Print Exam Seating
        </button>
      </div>
      <div id="statusMessage">Checking system settings...</div>
    </div>
<footer class="footer-section" style="background-color: #f8f9fa; padding: 20px 0; border-top: 1px solid #ccc; margin-top: 40px;">
  <div class="container">
    <div class="row align-items-center">
      <!-- Social Links -->
      <div class="col-md-4">
        <h3 style="margin-bottom: 15px;">Connect with Us</h3>
        <div class="social-links">
          <a href="https://www.instagram.com/squadvertex/?igsh=YzljYTk1ODg3Zg%3D%3D#" target="_blank" title="Instagram" style="margin-right: 10px;">
            <img src="https://img.icons8.com/color/48/instagram-new.png" alt="Instagram" style="width:32px; height:32px;">
          </a>
          <a href="https://x.com/SquadVertex_?t=iw82z-AjSDlmZxTzNid9sw&s=09" target="_blank" title="Twitter" style="margin-right: 10px;">
            <img src="https://img.icons8.com/color/48/twitter.png" alt="Twitter" style="width:32px; height:32px;">
          </a>
          <a href="https://discord.gg/dyWSDFREWZ" target="_blank" title="Discord" style="margin-right: 10px;">
            <img src="https://img.icons8.com/color/48/discord-logo.png" alt="Discord" style="width:32px; height:32px;">
          </a>
          <a href="https://youtube.com/@prince_squadvertex?si=djSrTHGczq73iFOi" target="_blank" title="YouTube">
            <img src="https://img.icons8.com/color/48/youtube-play.png" alt="YouTube" style="width:32px; height:32px;">
          </a>
        </div>
      </div>
      <!-- Copyright -->
      <div class="col-md-4 text-center">
        <p style="margin: 0;">&copy; 2025 SquadVertex. All rights reserved.</p>
      </div>
      <!-- Docs Redirect Button -->
      <div class="col-md-4 text-end">
        <a href="https://your-docs-link.example.com" target="_blank" class="btn btn-outline-primary" style="border-radius: 20px; padding: 6px 20px;">
          Docs
        </a>
      </div>
    </div>
  </div>
</footer>
    <!-- Firebase and Bootstrap JS -->
    <!-- Load Firebase SDK (v9 Modular) -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-app.js";
      import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-firestore.js";

      const firebaseConfig = {
        apiKey: "AIzaSyBV7Jg0BVzeCNQW9oiIiNItnejUsjj2DhA",
        authDomain: "squadvertex2007.firebaseapp.com",
        projectId: "squadvertex2007",
        storageBucket: "squadvertex2007.appspot.com",
        messagingSenderId: "168905083514",
        appId: "1:168905083514:web:c8bbe2ce9f87800a0f09c3"
      };

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      async function checkExamsModule() {
        const docRef = doc(db, "001-school", "systemSettings");
        try {
          const docSnap = await getDoc(docRef);
          if (docSnap.exists()) {
            const data = docSnap.data();
            return data.modules && data.modules.exams === true;
          } else {
            console.error("System settings document does not exist.");
            return false;
          }
        } catch (error) {
          console.error("Error fetching system settings:", error);
          return false;
        }
      }

      document.addEventListener("DOMContentLoaded", async () => {
        const examsEnabled = await checkExamsModule();
        const scheduleBtn = document.getElementById("scheduleBtn");
        const sittingBtn = document.getElementById("sittingBtn");
        const printBtn = document.getElementById("printBtn");
        const statusMessage = document.getElementById("statusMessage");

        if (examsEnabled) {
          scheduleBtn.disabled = false;
          sittingBtn.disabled = false;
          printBtn.disabled = false;
          statusMessage.textContent = "Exams Module is enabled. You may proceed with exam management.";
        } else {
          scheduleBtn.disabled = true;
          sittingBtn.disabled = true;
          printBtn.disabled = true;
          statusMessage.textContent = "Exams Module is currently disabled in system settings. Access is restricted.";
        }

        // Redirection for enabled buttons
        scheduleBtn.addEventListener("click", () => {
          if (!scheduleBtn.disabled) {
            window.location.href = "schedule.html";
          }
        });

        sittingBtn.addEventListener("click", () => {
          if (!sittingBtn.disabled) {
            window.location.href = "sitting_management.html";
          }
        });

        printBtn.addEventListener("click", () => {
          if (!printBtn.disabled) {
            window.location.href = "exam_print.html";
          }
        });
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>