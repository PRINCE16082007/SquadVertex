<!-- admin.html --><!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Coordinator Dashboard | SquadVertex</n<title>
  <style>
    body { font-family: 'Poppins', sans-serif; background:#fafafa; color:#333; margin:0; padding:2rem; }
    h1 { text-align:center; margin-bottom:1rem; }
    table { width:100%; border-collapse:collapse; margin-bottom:2rem; }
    th, td { padding:0.75rem; border:1px solid #ddd; text-align:left; }
    th { background:#7e3af2; color:#fff; }
    a.button { background:#7e3af2; color:#fff; padding:0.4rem 0.8rem; border-radius:4px; text-decoration:none; }
  </style>
</head>
<body>
  <h1>Coordinator Dashboard</h1>
  <table id="ticketsTable">
    <thead>
      <tr>
        <th>Name</th>
        <th>Age</th>
        <th>YT Channel</th>
        <th>Fees Ready?</th>
        <th>Requested At</th>
        <th>Chat</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-app.js";
    import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-firestore.js";
    
    const firebaseConfig = {
      apiKey: "AIzaSyBV7Jg0BVzeCNQW9oiIiNItnejUsjj2DhA",
      authDomain: "squadvertex2007.firebaseapp.com",
      projectId: "squadvertex2007",
      storageBucket: "squadvertex2007.appspot.com",
      messagingSenderId: "168905083514",
      appId: "1:168905083514:web:c8bbe2ce9f87800a0f09c3",
    };
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    async function loadTickets() {
      const snapshot = await getDocs(collection(db, 'tickets'));
      const tbody = document.querySelector('#ticketsTable tbody');
      snapshot.forEach(doc => {
        const data = doc.data();
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${data.name}</td>
          <td>${data.age}</td>
          <td><a href="${data.ytLink}" target="_blank">${data.ytName}</a></td>
          <td>${data.feesReady}</td>
          <td>${data.createdAt?.toDate().toLocaleString() || ''}</td>
          <td><a class="button" href="collaborator.html?uid=${doc.id}">Open Chat</a></td>
        `;
        tbody.appendChild(row);
      });
    }

    loadTickets();
  </script></body>
</html><!-- collaborator.html --><!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Chat with Creator | SquadVertex</title>
  <style>
    body { font-family: 'Poppins', sans-serif; background:#fafafa; color:#333; margin:0; padding:2rem; }
    h1 { text-align:center; margin-bottom:1rem; }
    #messages { max-height:400px; overflow-y:auto; background:#fff; padding:1rem; border-radius:6px; margin-bottom:1rem; }
    .msg { margin-bottom:0.75rem; }
    .msg .author { font-weight:600; }
    .chat-input { display:flex; }
    .chat-input input { flex:1; padding:0.6rem; border:1px solid #ccc; border-radius:4px; }
    .chat-input button { background:#7e3af2; color:#fff; border:none; padding:0.6rem 1rem; border-radius:4px; margin-left:0.5rem; cursor:pointer; }
  </style>
</head>
<body>
  <h1>Chat with Creator</h1>
  <div id="messages"></div>
  <div class="chat-input">
    <input type="text" id="chatInput" placeholder="Type your messageâ€¦" />
    <button id="sendBtn">Send</button>
  </div>  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-app.js";
    import { getFirestore, collection, addDoc, onSnapshot, doc, getDoc } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-firestore.js";
    
    const firebaseConfig = {
      apiKey: "AIzaSyBV7Jg0BVzeCNQW9oiIiNItnejUsjj2DhA",
      authDomain: "squadvertex2007.firebaseapp.com",
      projectId: "squadvertex2007",
      storageBucket: "squadvertex2007.appspot.com",
      messagingSenderId: "168905083514",
      appId: "1:168905083514:web:c8bbe2ce9f87800a0f09c3",
    };
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const params = new URLSearchParams(window.location.search);
    const userUid = params.get('uid');

    async function loadProfile() {
      const profileSnap = await getDoc(doc(db, 'tickets', userUid));
      const data = profileSnap.data();
      const header = document.querySelector('h1');
      header.textContent = `Chat with ${data.name}`;
    }

    function listenMessages() {
      const msgsRef = collection(db, 'tickets', userUid, 'messages');
      onSnapshot(msgsRef, snap => {
        const container = document.getElementById('messages');
        container.innerHTML = '';
        snap.docs
          .sort((a,b) => a.data().timestamp.toMillis() - b.data().timestamp.toMillis())
          .forEach(doc => {
            const { author, text } = doc.data();
            const el = document.createElement('div');
            el.className = 'msg';
            el.innerHTML = `<div class="author">${author}</div><div class="text">${text}</div>`;
            container.appendChild(el);
          });
        container.scrollTop = container.scrollHeight;
      });
    }

    document.getElementById('sendBtn').addEventListener('click', async () => {
      const text = document.getElementById('chatInput').value.trim();
      if (!text) return;
      await addDoc(collection(db, 'tickets', userUid, 'messages'), {
        author: 'Coordinator',
        text,
        timestamp: serverTimestamp()
      });
      document.getElementById('chatInput').value = '';
    });

    loadProfile().then(listenMessages);
  </script></body>
</html>