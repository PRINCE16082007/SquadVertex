<!DOCTYPE html><html lang="en"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Safe Listening - Chat</title>  <!-- Bootstrap CSS (valid version) -->  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background: #0d1117;
      color: #c9d1d9;
      font-family: 'Segoe UI', sans-serif;
    }
    .chat-box {
      max-height: 70vh;
      overflow-y: auto;
      padding: 1rem;
      border-radius: 10px;
      background: #161b22;
    }
    .message {
      padding: 10px 15px;
      border-radius: 15px;
      margin-bottom: 10px;
      background: #21262d;
    }
    .message.user {
      background: #1f6feb;
      color: #fff;
      align-self: flex-end;
    }
    .message.ai {
      background: #30363d;
      color: #c9d1d9;
      align-self: flex-start;
    }
    .chat-input {
      resize: none;
    }
    .avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      margin-right: 8px;
    }
    .msg-wrapper {
      display: flex;
      align-items: center;
    }
  </style>
</head><body>
  <div class="container py-4">
    <h3 class="text-center mb-4">You're Safe Here.</h3>
    <div class="chat-box d-flex flex-column mb-3" id="chatBox">
      <!-- Messages will appear here -->
    </div>
    <div class="input-group">
      <textarea id="chatInput" class="form-control chat-input" rows="2" placeholder="Type what you feel..."></textarea>
      <button id="sendBtn" class="btn btn-primary">Send</button>
    </div>
  </div>  <!-- Bootstrap JS -->  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>  <script>
    // Anonymous user ID setup (localStorage)
    const userId = localStorage.getItem("sln_user_id") || (() => {
      const id = "SilentSoul" + Math.floor(Math.random() * 1000);
      localStorage.setItem("sln_user_id", id);
      return id;
    })();

    // Avatar Generator (based on ID hash or random)
    function getAvatarUrl(id) {
      const hash = id.split('').reduce((a, b) => a + b.charCodeAt(0), 0);
      const color = ["#6f42c1", "#d63384", "#fd7e14", "#20c997"][hash % 4];
      return `https://ui-avatars.com/api/?name=${id}&background=${color.slice(1)}&color=fff&size=64`;
    }

    const chatBox = document.getElementById("chatBox");
    const chatInput = document.getElementById("chatInput");
    const sendBtn = document.getElementById("sendBtn");

    function appendMessage(text, isUser = true) {
      const msgDiv = document.createElement("div");
      msgDiv.classList.add("message", isUser ? "user" : "ai");

      const wrapper = document.createElement("div");
      wrapper.classList.add("msg-wrapper");

      const avatar = document.createElement("img");
      avatar.src = getAvatarUrl(userId);
      avatar.className = "avatar";

      wrapper.appendChild(avatar);
      msgDiv.appendChild(document.createTextNode(text));
      wrapper.appendChild(msgDiv);

      chatBox.appendChild(wrapper);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    sendBtn.onclick = () => {
      const text = chatInput.value.trim();
      if (!text) return;
      appendMessage(text, true);
      chatInput.value = "";

      // Placeholder response from EXELIS
      setTimeout(() => {
        appendMessage("You're not alone. Iâ€™m listening in the silence.", false);
      }, 1000);
    };
  </script></body></html>