<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <title>SLN Chat</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    :root {
      --bg-light: #ffffff;
      --bg-dark: #1e1e2f;
      --header-light: #f8f9fa;
      --header-dark: #2c2c3d;
      --input-light: #f0f0f5;
      --input-dark: #2c2c3d;
      --text-light: #000;
      --text-dark: #fff;
      --user-msg-light: #cfe2ff;
      --user-msg-dark: #3b83bd;
      --ai-msg-light: #e2e3e5;
      --ai-msg-dark: #4a4a5a;
    }
    body.light {
      background: var(--bg-light);
      color: var(--text-light);
    }
    body.dark {
      background: var(--bg-dark);
      color: var(--text-dark);
    }
    .header-bar.light { background: var(--header-light); }
    .header-bar.dark { background: var(--header-dark); }
    .chat-box.light { background: rgba(0,0,0,0.03); }
    .chat-box.dark { background: rgba(255,255,255,0.05); }
    .input-area.light { background: var(--input-light); }
    .input-area.dark { background: var(--input-dark); }
    .message { padding: .75rem 1rem; border-radius: 1rem; max-width: 70%; word-break: break-word; }
    .user.light .message { background: var(--user-msg-light); color: var(--text-light); }
    .user.dark .message { background: var(--user-msg-dark); color: var(--text-dark); }
    .ai.light .message { background: var(--ai-msg-light); color: var(--text-light); }
    .ai.dark .message { background: var(--ai-msg-dark); color: var(--text-dark); }
    .msg-wrapper { display: flex; align-items: flex-end; margin-bottom: 1rem; }
    .msg-wrapper.user { justify-content: flex-end; }
    .msg-wrapper.ai { justify-content: flex-start; }
    .avatar { width: 32px; height: 32px; border-radius: 50%; margin-right: .5rem; }
    .input-area textarea { resize: none; border-radius: .5rem; border: 1px solid #ccc; }
    .settings-icon { background: none; border: none; font-size: 1.2rem; cursor: pointer; }
  </style>
</head>
<body class="dark">
  <!-- Top Bar -->
  <div id="headerBar" class="header-bar dark d-flex justify-content-between align-items-center px-3 py-2">
    <div class="d-flex align-items-center gap-2">
      <button id="settingsBtn" class="settings-icon">⚙️</button>
      <select id="modeSelect" class="form-select form-select-sm">
        <option value="chat">Chat</option>
        <option value="ritual">Ritual</option>
      </select>
    </div>
    <div class="d-flex align-items-center gap-2">
      <select id="langSelect" class="form-select form-select-sm"></select>
      <select id="themeSelect" class="form-select form-select-sm">
        <option value="dark">Dark</option>
        <option value="light">Light</option>
      </select>
    </div>
  </div>  <!-- Chat Box -->  <div id="chatBox" class="chat-box dark flex-grow-1 overflow-auto p-3"></div>  <!-- Input -->  <div id="inputArea" class="input-area dark p-3 border-top">
    <div class="input-group">
      <textarea id="chatInput" class="form-control" rows="2"></textarea>
      <button id="sendBtn" class="btn btn-primary ms-2"></button>
    </div>
  </div>  <!-- Bootstrap JS -->  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>  <script>
    // Translations
    const i18n = {
      en: { placeholder: 'Type what you feel...', send: 'Send', chat: 'Chat', ritual: 'Ritual' },
      hi: { placeholder: 'जो महसूस करते हो यहाँ लिखो...', send: 'भेजें', chat: 'चैट', ritual: 'रिचुअल' },
      mr: { placeholder: 'जे वाटतं ते लिहा...', send: 'पाठवा', chat: 'चॅट', ritual: 'रिच्युअल' },
      ta: { placeholder: 'உணர்வுகளைத் தட்டச்சு செய்யவும்...', send: 'அனுப்பு', chat: 'செர்ச்', ritual: 'அறிவிப்பு' },
      bn: { placeholder: 'আপনার অনুভূতি লিখুন...', send: 'পাঠান', chat: 'চ্যাট', ritual: 'রথ' },
      ur: { placeholder: 'اپنا احساس لکھیں...', send: 'بھیجیں', chat: 'چیٹ', ritual: 'رسومات' }
    };

    // Populate language selector
    const langSelect = document.getElementById('langSelect');
    Object.keys(i18n).forEach(code => {
      const opt = document.createElement('option'); opt.value = code; opt.textContent = code.toUpperCase();
      langSelect.appendChild(opt);
    });
    langSelect.value = 'en';

    const chatInput = document.getElementById('chatInput');
    const sendBtn = document.getElementById('sendBtn');
    const modeSelect = document.getElementById('modeSelect');
    const themeSelect = document.getElementById('themeSelect');

    // Apply translations
    function applyLanguage() {
      const lang = langSelect.value;
      const dict = i18n[lang] || i18n.en;
      chatInput.placeholder = dict.placeholder;
      sendBtn.textContent = dict.send;
      modeSelect.options[0].text = dict.chat;
      modeSelect.options[1].text = dict.ritual;
    }
    langSelect.addEventListener('change', applyLanguage);
    applyLanguage();

    // Theme switch
    function applyTheme() {
      const theme = themeSelect.value;
      document.body.className = theme;
      ['headerBar','chatBox','inputArea'].forEach(id => {
        const el = document.getElementById(id);
        el.classList.toggle('light', theme==='light');
        el.classList.toggle('dark', theme==='dark');
      });
    }
    themeSelect.addEventListener('change', applyTheme);
    applyTheme();

    // Anonymous ID & avatar
    const userId = localStorage.getItem('sln_user_id') || (() => {
      const id = 'SilentSoul' + Math.floor(Math.random()*1000);
      localStorage.setItem('sln_user_id', id); return id;
    })();
    function getAvatarUrl(id) {
      const colors = ['ff6b6b','54a0ff','1dd1a1','feca57'];
      const hash = id.split('').reduce((a,b)=>a+b.charCodeAt(0),0);
      return `https://ui-avatars.com/api/?name=${id}&background=${colors[hash%4]}&color=000&size=64`;
    }

    const chatBox = document.getElementById('chatBox');

    // Send messages
    function sendMessage() {
      const txt = chatInput.value.trim(); if(!txt) return;
      addMessage(userId, txt, 'user'); chatInput.value = '';
      setTimeout(()=>addMessage('EXELIS', i18n[langSelect.value].ritual==='Ritual' ? 'Your words are received...' : 'You’re heard, quietly.', 'ai'),800);
    }
    sendBtn.addEventListener('click', sendMessage);
    chatInput.addEventListener('keydown', e => { if(e.key==='Enter'&&!e.shiftKey){ e.preventDefault(); sendMessage(); }});

    function addMessage(id,text,cls){
      const wrap = document.createElement('div'); wrap.className=`msg-wrapper ${cls}`;
      const img = document.createElement('img'); img.src=getAvatarUrl(id); img.className='avatar';
      const msg = document.createElement('div'); msg.className='message'; msg.textContent=text;
      if(cls==='user') wrap.append(msg,img); else wrap.append(img,msg);
      chatBox.appendChild(wrap); chatBox.scrollTop=chatBox.scrollHeight;
    }
  </script></body>
</html>