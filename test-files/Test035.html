<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>Full Orbit Game ‚Äî Ultimate Build</title>

<style>
:root{
  --bg:#030916;
  --panel:#0a1833;
  --accent:#64c2ff;
  --good:#6affd1;
  --danger:#ff6b6b;
  --bomb:#ffd166;
  --text:#eaf6ff;
  --muted:#9fc9ff;
}

*{box-sizing:border-box}
body{
  margin:0;
  background:radial-gradient(circle at top,#071a38,#02060d 70%);
  color:var(--text);
  font-family:Inter,Poppins,Arial,sans-serif;
}

.container{
  max-width:1200px;
  margin:auto;
  padding:16px;
}

header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:10px;
}

.title{
  font-size:1.4rem;
  font-weight:900;
}

.btn{
  background:rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.12);
  color:var(--text);
  padding:8px 12px;
  border-radius:10px;
  cursor:pointer;
  font-weight:700;
}

.card{
  background:linear-gradient(180deg,#081b3a,#040b18);
  border-radius:16px;
  padding:12px;
  border:1px solid rgba(255,255,255,.05);
  box-shadow:0 30px 60px rgba(0,0,0,.8);
}

.play{
  position:relative;
  height:560px;
  border-radius:14px;
  overflow:hidden;
  background:radial-gradient(circle,#0a2244,#02060d);
}

canvas{position:absolute;inset:0;width:100%;height:100%}

.earth{
  position:absolute;
  left:50%;top:50%;
  transform:translate(-50%,-50%);
  font-size:64px;
  filter:drop-shadow(0 0 28px rgba(100,194,255,.8));
}

.hud{
  position:absolute;
  right:14px;top:14px;
  background:rgba(6,16,32,.75);
  padding:10px 14px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.06);
  display:flex;
  gap:14px;
  font-size:.8rem;
}

.hud strong{font-size:1.05rem}

.warning{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  font-weight:900;
  font-size:1.4rem;
  color:var(--danger);
  opacity:0;
  transition:.3s;
}

.warning.show{opacity:1}

.fullscreen{
  position:absolute;
  left:14px;
  bottom:14px;
}
</style>
</head>

<body>

<div class="container" id="uiRoot">
<header>
  <div class="title">üåå Full Orbit Game</div>
  <button class="btn" id="fsBtn">‚õ∂ Fullscreen</button>
</header>

<div class="card">
<div class="play" id="gameRoot">
<canvas id="c"></canvas>
<div class="earth">üåç</div>

<div class="warning" id="warn">‚ö† ALIEN SHIP INCOMING</div>

<div class="hud">
  <div><strong id="score">0</strong><br>Score</div>
  <div><strong id="combo">0</strong><br>Combo</div>
  <div><strong id="acc">100%</strong><br>Accuracy</div>
</div>

<button class="btn fullscreen" id="fsBtn2">‚õ∂</button>
</div>
</div>
</div>

<script>
/* ================= CORE ================= */
const canvas=document.getElementById("c");
const ctx=canvas.getContext("2d");
const scoreEl=score=document.getElementById("score");
const comboEl=document.getElementById("combo");
const accEl=document.getElementById("acc");
const warnEl=document.getElementById("warn");
const fsBtn=document.getElementById("fsBtn");
const fsBtn2=document.getElementById("fsBtn2");
const uiRoot=document.getElementById("uiRoot");
const gameRoot=document.getElementById("gameRoot");

let DPR=Math.max(1,devicePixelRatio||1),W,H;
function resize(){
  W=canvas.offsetWidth;
  H=canvas.offsetHeight;
  canvas.width=W*DPR;
  canvas.height=H*DPR;
  ctx.setTransform(DPR,0,0,DPR,0,0);
}
addEventListener("resize",resize);
resize();

/* ================= STATE ================= */
let objects=[];
let score=0,combo=0;
let clicks=0,hits=0;
let lastBoss=performance.now();

/* ================= TYPES ================= */
const TYPES={
  orb:{emoji:"üîµ",score:1},
  bonus:{emoji:"üîÆ",score:3},
  rare:{emoji:"üí†",score:6},
  shield:{emoji:"üõ°Ô∏è",score:8,shield:1},
  alien:{emoji:"üëæ",bad:true},
  bomb:{emoji:"üí£",bomb:true},
  boss:{emoji:"üëë",boss:true}
};

/* ================= HELPERS ================= */
function accuracy(){
  return Math.round((hits/Math.max(1,clicks))*100);
}

/* ================= SPAWN ================= */
function spawn(type){
  const angle=Math.random()*Math.PI*2;
  const radius=100+Math.random()*(Math.min(W,H)/2-120);
  const speed=Math.min(0.012,0.004+Math.random()*0.006);

  objects.push({
    type,
    angle,
    radius,
    speed:(Math.random()<0.5?-1:1)*speed,
    size:32,
    shield:type.shield||0,
    born:performance.now()
  });
}

setInterval(()=>{
  if(objects.length>18) return;
  const r=Math.random();
  if(r<0.6) spawn(TYPES.orb);
  else if(r<0.75) spawn(TYPES.bonus);
  else if(r<0.85) spawn(TYPES.shield);
  else if(r<0.92){
    warnEl.classList.add("show");
    setTimeout(()=>warnEl.classList.remove("show"),1200);
    spawn(TYPES.alien);
  }
  else spawn(TYPES.bomb);
},900);

/* ================= BOSS ================= */
function spawnBoss(){
  objects.push({
    type:TYPES.boss,
    angle:0,
    radius:140,
    speed:0.002,
    size:60,
    hp:6
  });
}

setInterval(()=>{
  if(performance.now()-lastBoss>90000){
    spawnBoss();
    lastBoss=performance.now();
  }
},2000);

/* ================= INPUT ================= */
canvas.addEventListener("pointerdown",e=>{
  clicks++;
  const r=canvas.getBoundingClientRect();
  const x=e.clientX-r.left;
  const y=e.clientY-r.top;
  const cx=W/2,cy=H/2;

  let hit=null,dMin=9999;
  for(const o of objects){
    const ox=cx+Math.cos(o.angle)*o.radius;
    const oy=cy+Math.sin(o.angle)*o.radius;
    const d=Math.hypot(x-ox,y-oy);
    if(d<o.size && d<dMin){
      hit=o;dMin=d;
    }
  }

  if(!hit){
    combo=0;
    comboEl.textContent=combo;
    accEl.textContent=accuracy()+"%";
    return;
  }

  hits++;
  accEl.textContent=accuracy()+"%";

  if(hit.type.bad){
    combo=0;
    score=Math.max(0,Math.floor(score*0.9));
    objects=objects.filter(o=>o!==hit);
    scoreEl.textContent=score;
    comboEl.textContent=combo;
    return;
  }

  if(hit.type.bomb){
    objects=objects.filter(o=>{
      const ox=cx+Math.cos(o.angle)*o.radius;
      const oy=cy+Math.sin(o.angle)*o.radius;
      return Math.hypot(ox-(cx+Math.cos(hit.angle)*hit.radius),
                        oy-(cy+Math.sin(hit.angle)*hit.radius))>120;
    });
    combo+=3;
    objects=objects.filter(o=>o!==hit);
    return;
  }

  if(hit.type.boss){
    hit.hp--;
    if(hit.hp<=0){
      score+=20;
      spawn(TYPES.bomb);
      objects=objects.filter(o=>o!==hit);
    }
    return;
  }

  if(hit.shield>0){
    hit.shield--;
    return;
  }

  objects=objects.filter(o=>o!==hit);
  score+=hit.type.score;
  combo++;
  scoreEl.textContent=score;
  comboEl.textContent=combo;
});

/* ================= DRAW ================= */
function loop(){
  ctx.clearRect(0,0,W,H);
  const cx=W/2,cy=H/2;

  for(const o of objects){
    o.angle+=o.speed;
    const x=cx+Math.cos(o.angle)*o.radius;
    const y=cy+Math.sin(o.angle)*o.radius;

    if(o.shield){
      ctx.beginPath();
      ctx.strokeStyle="rgba(106,255,209,.8)";
      ctx.lineWidth=3;
      ctx.arc(x,y,o.size+6,0,Math.PI*2);
      ctx.stroke();
    }

    ctx.font=o.size+"px serif";
    ctx.textAlign="center";
    ctx.textBaseline="middle";
    ctx.fillText(o.type.emoji,x,y);
  }
  requestAnimationFrame(loop);
}
loop();

/* ================= FULLSCREEN ================= */
async function goFullscreen(){
  if(!document.fullscreenElement){
    await gameRoot.requestFullscreen();
    uiRoot.style.display="none";
    try{
      if(screen.orientation && screen.orientation.lock){
        await screen.orientation.lock("landscape");
      }
    }catch(e){}
  }else{
    document.exitFullscreen();
    uiRoot.style.display="";
  }
}
fsBtn.onclick=goFullscreen;
fsBtn2.onclick=goFullscreen;
</script>

</body>
</html>