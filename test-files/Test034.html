<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Responsive Styling Tester — Horizontal Scroll Ready</title>
<style>
  :root{
    --bg1:#667eea; --bg2:#764ba2; --panel:#ffffff; --muted:#64748b; --accent:#667eea;
    --max-wrap:1200px;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%}
  body{
    font-family:Inter,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial;
    background:linear-gradient(135deg,var(--bg1) 0%,var(--bg2) 100%);
    padding:20px;color:#0f172a;-webkit-font-smoothing:antialiased;
  }

  .app{
    max-width:var(--max-wrap);margin:0 auto;background:var(--panel);border-radius:12px;overflow:hidden;
    box-shadow:0 20px 40px rgba(2,6,23,0.12);
  }

  .head{padding:18px 22px;background:linear-gradient(135deg,#2c3e50 0%,#34495e 100%);color:#fff}
  .head h1{font-size:1.25rem;margin-bottom:6px}
  .head p{opacity:.9;font-size:0.95rem}

  .controls{display:grid;grid-template-columns:1fr 320px;gap:14px;padding:18px;border-bottom:1px solid #eef2ff;background:#fbfdff}
  @media (max-width:980px){ .controls{grid-template-columns:1fr; } }

  label{display:block;margin-bottom:8px;font-weight:700;color:#0f172a;font-size:13px}
  .field{margin-bottom:12px}
  input[type=url], input[type=number], select{
    width:100%;padding:10px 12px;border-radius:8px;border:1px solid #e6eef8;font-size:14px;background:#fff;
  }
  .row{display:flex;gap:10px;align-items:center}
  .small{font-size:13px;color:var(--muted)}

  .btn{padding:10px 12px;border-radius:8px;border:0;font-weight:700;cursor:pointer}
  .primary{background:linear-gradient(135deg,var(--bg1),var(--bg2));color:#fff}
  .muted-btn{background:#f8fafc;border:1px solid #e6eef8;color:#0f172a}

  .preview{padding:18px;display:flex;flex-direction:column;gap:12px;align-items:center}
  .meta{display:flex;gap:10px;align-items:center;justify-content:space-between;width:100%}
  .meta .left{display:flex;gap:8px;align-items:center}
  .badge{background:#0f172a;color:#fff;padding:6px 10px;border-radius:8px;font-weight:700;font-size:13px}
  .info{font-size:13px;color:var(--muted)}

  /* iframe container: horizontal scrollbar enabled by default */
  .iframe-wrapper{
    width:100%;border-radius:10px;border:1px solid #e6eef8;box-shadow:0 8px 24px rgba(2,6,23,0.06);
    background:#fff;padding:12px;
  }

  .iframe-container{
    width:100%;height:60vh; /* preview height */
    overflow-x:scroll;       /* horizontal scrollbar always available when content wider */
    overflow-y:auto;
    scrollbar-gutter:stable both-edges;
    -webkit-overflow-scrolling:touch;
    background:linear-gradient(180deg,#fff,#fafafa);
    border-radius:8px;
    position:relative;
  }

  /* style scrollbars (modern browsers) */
  .iframe-container::-webkit-scrollbar{height:10px}
  .iframe-container::-webkit-scrollbar-thumb{background:rgba(100,116,139,0.35);border-radius:999px}
  .iframe-container::-webkit-scrollbar-track{background:transparent}

  .iframe-inner{
    display:block; /* this element's width determines content width so scroll appears */
    background:#fff;
    margin:10px; /* small margin so scroller visible */
    box-shadow:0 6px 20px rgba(2,6,23,0.04);
  }

  iframe.preview-frame{display:block;border:0;background:#fff}

  .loading{position:absolute;left:0;right:0;top:0;bottom:0;display:flex;align-items:center;justify-content:center;z-index:40}
  .spinner{width:36px;height:36px;border:4px solid #f0f4f8;border-top:4px solid var(--accent);border-radius:50%;animation:spin .9s linear infinite}
  @keyframes spin{to{transform:rotate(360deg)}}

  .controls-right{display:flex;flex-direction:column;gap:8px}
  .toggle{display:flex;gap:8px;align-items:center}
  .small-muted{font-size:12px;color:#526075}

  .footer-note{padding:12px;border-top:1px dashed #eef2ff;font-size:13px;color:var(--muted)}
</style>
</head>
<body>
  <div class="app" role="application" aria-label="Responsive Styling Tester">
    <div class="head">
      <h1>Responsive Styling Tester</h1>
      <p>Preview desktop sizes on mobile. Horizontal scrollbar support added — toggle to force natural width.</p>
    </div>

    <div class="controls">
      <div>
        <div class="field">
          <label for="url">Website URL</label>
          <input id="url" type="url" placeholder="https://example.com" />
          <div id="urlErr" class="small" style="color:#dc2626;display:none;margin-top:6px"></div>
        </div>

        <div class="field">
          <label>Preset / Ratio</label>
          <div class="row">
            <select id="preset">
              <option value="">-- pick preset --</option>
              <option value="1366:768">1366 × 768</option>
              <option value="1440:900">1440 × 900</option>
              <option value="1920:1080">1920 × 1080</option>
              <option value="2560:1440">2560 × 1440</option>
              <option value="3840:2160">3840 × 2160</option>
            </select>
            <div style="display:flex;gap:6px;align-items:center">
              <input id="w" type="number" placeholder="width" min="1" style="width:110px;padding:10px;border-radius:8px;border:1px solid #e6eef8"/>
              <input id="h" type="number" placeholder="height" min="1" style="width:110px;padding:10px;border-radius:8px;border:1px solid #e6eef8"/>
            </div>
          </div>
          <div id="ratioPreview" class="small" style="margin-top:8px">Current: —</div>
        </div>

        <div class="field row" style="align-items:center;">
          <button id="load" class="btn primary">Load</button>
          <button id="reset" class="btn muted-btn">Reset</button>
          <button id="copyCss" class="btn muted-btn">Copy CSS</button>
        </div>

        <div class="field small-muted">Tip: Use <strong>Force horizontal scroll</strong> to see full desktop width with scrollbar. Auto-fit prevents overflow by default.</div>
      </div>

      <div class="controls-right">
        <div class="field">
          <label>View options</label>
          <div class="toggle">
            <input id="autoFit" type="checkbox" checked />
            <label for="autoFit" class="small">Auto-fit to viewport</label>
          </div>
          <div class="toggle">
            <input id="forceScroll" type="checkbox" />
            <label for="forceScroll" class="small">Force horizontal scroll (no fit)</label>
          </div>
        </div>

        <div class="field">
          <label>Zoom</label>
          <div class="row">
            <button id="zoomOut" class="btn muted-btn">-</button>
            <div id="zoomVal" class="small" style="min-width:56px;text-align:center">100%</div>
            <button id="zoomIn" class="btn muted-btn">+</button>
            <button id="resetZoom" class="btn muted-btn">Reset</button>
          </div>
        </div>

        <div class="field">
          <label>Presets quick</label>
          <div class="row">
            <button class="btn muted-btn preset" data-preset="1366:768">1366×768</button>
            <button class="btn muted-btn preset" data-preset="1920:1080">1920×1080</button>
            <button class="btn muted-btn preset" data-preset="2560:1440">2K</button>
          </div>
        </div>

        <div class="field">
          <label>Effective</label>
          <div class="small">Render size: <span id="effective">—</span></div>
        </div>
      </div>
    </div>

    <div class="preview">
      <div class="meta">
        <div class="left">
          <div class="badge" id="badge">—</div>
          <div style="width:8px"></div>
          <div class="info" id="info">Scale: —</div>
        </div>
        <div class="right small">Enter = load · +/- = zoom</div>
      </div>

      <div class="iframe-wrapper">
        <div id="iframeContainer" class="iframe-container" aria-live="polite">
          <div id="loading" class="loading" style="display:none">
            <div class="spinner"></div>
          </div>

          <!-- the inner block width controls horizontal scroll -->
          <div id="inner" class="iframe-inner" style="width:800px;height:450px">
            <iframe id="frame" class="preview-frame" src="about:blank" width="800" height="450" sandbox></iframe>
          </div>
        </div>
      </div>

      <div class="footer-note">Made for quick previews — cross-origin pages may restrict interaction because of browser sandboxing.</div>
    </div>
  </div>

<script>
  // state
  let naturalW = 800, naturalH = 450;
  let userZoom = 1.0; // multiplier
  const minZoom = 0.2, maxZoom = 2.0;
  const el = id => document.getElementById(id);

  // refs
  const urlEl = el('url'), wEl = el('w'), hEl = el('h'), preset = el('preset');
  const loadBtn = el('load'), resetBtn = el('reset'), copyBtn = el('copyCss');
  const autoFit = el('autoFit'), forceScroll = el('forceScroll');
  const zoomIn = el('zoomIn'), zoomOut = el('zoomOut'), resetZoom = el('resetZoom'), zoomVal = el('zoomVal');
  const inner = el('inner'), frame = el('frame'), loading = el('loading');
  const badge = el('badge'), info = el('info'), effective = el('effective'), urlErr = el('urlErr');

  // init
  document.addEventListener('DOMContentLoaded', init);
  function init(){
    preset.value = '';
    updateInputsFromNatural();
    attachEvents();
    render();
  }

  function attachEvents(){
    preset.addEventListener('change', ()=> {
      if(!preset.value) return;
      const [pw,ph] = preset.value.split(':').map(Number);
      setNatural(pw,ph);
    });

    document.querySelectorAll('.preset').forEach(b=>{
      b.addEventListener('click',(e)=>{
        setNatural(...b.dataset.preset.split(':').map(Number));
      });
    });

    wEl.addEventListener('input', ()=> {
      const val = parseInt(wEl.value,10);
      if(val>0) naturalW = val;
      render();
    });
    hEl.addEventListener('input', ()=> {
      const val = parseInt(hEl.value,10);
      if(val>0) naturalH = val;
      render();
    });

    loadBtn.addEventListener('click', load);
    resetBtn.addEventListener('click', resetAll);
    copyBtn.addEventListener('click', copyCSS);

    zoomIn.addEventListener('click', ()=> setZoom(userZoom + 0.1));
    zoomOut.addEventListener('click', ()=> setZoom(userZoom - 0.1));
    resetZoom.addEventListener('click', ()=> setZoom(1));

    forceScroll.addEventListener('change', ()=> render());
    autoFit.addEventListener('change', ()=> render());

    // keyboard
    document.addEventListener('keydown',(e)=>{
      if(e.key === 'Enter'){ load(); }
      if(e.key === '+' || e.key === '=') setZoom(userZoom + 0.05);
      if(e.key === '-') setZoom(userZoom - 0.05);
    });

    // responsive recompute
    window.addEventListener('resize', debounce(render,120));
  }

  function setNatural(w,h){
    naturalW = Math.max(1,Math.floor(w));
    naturalH = Math.max(1,Math.floor(h));
    wEl.value = naturalW; hEl.value = naturalH;
    render();
  }

  function updateInputsFromNatural(){
    wEl.value = naturalW; hEl.value = naturalH;
    el('ratioPreview').textContent = `Current: ${naturalW} × ${naturalH}`;
  }

  function computeDisplay(){
    const container = el('iframeContainer');
    const availableW = Math.max(200, container.clientWidth - 20);
    const availableH = Math.max(200, container.clientHeight - 20);

    // If forceScroll active => display full natural width * userZoom (causes horizontal scrollbar)
    if(forceScroll.checked){
      return {
        dispW: Math.round(naturalW * userZoom),
        dispH: Math.round(naturalH * userZoom),
        scale: userZoom
      };
    }

    // Auto-fit if checked and natural > available
    if(autoFit.checked){
      const fitScale = Math.min(availableW / naturalW, availableH / naturalH, 1);
      const combined = fitScale * userZoom;
      return {
        dispW: Math.round(naturalW * combined),
        dispH: Math.round(naturalH * combined),
        scale: combined
      };
    }

    // Else: natural width but allow zoom multiplier
    return {
      dispW: Math.round(naturalW * userZoom),
      dispH: Math.round(naturalH * userZoom),
      scale: userZoom
    };
  }

  function render(){
    // update inputs preview
    updateInputsFromNatural();

    const out = computeDisplay();
    // set inner container to natural size (so scroll width relates to content width)
    inner.style.width = out.dispW + 'px';
    inner.style.height = out.dispH + 'px';
    frame.style.width = out.dispW + 'px';
    frame.style.height = out.dispH + 'px';
    badge.textContent = `${naturalW}×${naturalH}`;
    info.textContent = `Scale: ${Math.round(out.scale*100)}% (zoom ${Math.round(userZoom*100)}%)`;
    zoomVal.textContent = `${Math.round(userZoom*100)}%`;
    effective.textContent = `${out.dispW}px × ${out.dispH}px`;
    el('ratioPreview').textContent = `Current: ${naturalW} × ${naturalH}`;
  }

  function validateURL(u){
    try{
      const x = new URL(u);
      return x.protocol === 'http:' || x.protocol === 'https:';
    }catch(e){return false}
  }

  function load(){
    const u = urlEl.value.trim();
    if(!u){ showUrlErr('Enter a URL'); return; }
    if(!validateURL(u)){ showUrlErr('Invalid URL (must start with http:// or https://)'); return; }
    showUrlErr('','hide');
    // set src and show loader
    loading.style.display = 'flex';
    frame.style.display = 'none';
    try{
      frame.src = u;
    }catch(e){
      alert('Failed to set iframe src — browser restriction.');
      loading.style.display = 'none';
      return;
    }
    // events
    frame.onload = ()=> { loading.style.display = 'none'; frame.style.display = 'block'; }
    frame.onerror = ()=> { loading.style.display = 'none'; frame.style.display = 'block'; alert('Error loading the page (CORS or network error).'); }
  }

  function resetAll(){
    urlEl.value = '';
    preset.value = '';
    setNatural(800,450);
    userZoom = 1;
    autoFit.checked = true;
    forceScroll.checked = false;
    frame.src = 'about:blank';
    loading.style.display = 'none';
    render();
  }

  function setZoom(z){
    userZoom = Math.max(minZoom, Math.min(maxZoom, +(z.toFixed(3))));
    render();
  }

  function copyCSS(){
    const out = computeDisplay();
    const snippet = `
/* Paste into your test container */
.preview-target{
  width: ${out.dispW}px;
  height: ${out.dispH}px;
  overflow: auto;
}
.preview-target > iframe{
  width: ${naturalW}px;
  height: ${naturalH}px;
  transform-origin: 0 0;
  transform: scale(${(out.scale / (naturalW===0?1:1)).toFixed(3)});
}
`.trim();
    navigator.clipboard?.writeText(snippet).then(()=>{
      copyBtn.textContent = 'Copied!';
      setTimeout(()=> copyBtn.textContent = 'Copy CSS',900);
    }).catch(()=> {
      alert('Copy failed, here is the snippet:\n\n' + snippet);
    });
  }

  function showUrlErr(msg, mode='show'){ urlErr.style.display = mode==='hide' ? 'none' : 'block'; urlErr.textContent = msg; }

  // simple debounce
  function debounce(fn, t=100){
    let to;
    return (...a)=>{ clearTimeout(to); to = setTimeout(()=> fn(...a), t); }
  }
</script>
</body>
</html>