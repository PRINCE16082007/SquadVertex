<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>GalaxyWeb Functional</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
<!-- Google Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
  /* Updated CSS with enhancements */
  :root {
    --primary-bg: #181f2b;
    --secondary-bg: #232e40;
    --accent-color: #fab84f;
    --card-bg: rgba(24,31,43,0.92);
    --text-color: #fff;
    --hover-color: #6cdbf7;
    --transition-speed: 0.3s;
  }
  
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }
  
  body {
    background: var(--primary-bg);
    color: var(--text-color);
    margin: 0;
    font-family: 'Space Grotesk', sans-serif;
    overflow-x: hidden;
  }
  
  /* Enhanced Top Bar */
  .top-bar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 100px;
    background: var(--secondary-bg);
    padding: 0 30px;
    position: sticky;
    top: 0;
    z-index: 1000;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    transition: all var(--transition-speed);
  }
  
  .logo-title {
    display: flex;
    align-items: center;
    gap: 15px;
    font-size: 2rem;
    font-weight: bold;
    transition: transform var(--transition-speed);
  }
  
  .logo-title:hover {
    transform: scale(1.05);
  }
  
  .nav-buttons {
    display: flex;
    align-items: center;
    gap: 30px;
    font-size: 1.2rem;
    position: relative;
  }
  
  .nav-btn, .profile-btn {
    background: none;
    border: none;
    color: var(--text-color);
    cursor: pointer;
    font-size: 1.1rem;
    position: relative;
    padding: 8px 12px;
    border-radius: 6px;
    transition: all var(--transition-speed);
    font-family: 'Space Grotesk', sans-serif;
  }
  
  .nav-btn:hover, .profile-btn:hover {
    background: rgba(255, 255, 255, 0.1);
    transform: translateY(-2px);
  }
  
  .nav-btn::after {
    content: '';
    position: absolute;
    width: 0;
    height: 2px;
    bottom: 0;
    left: 50%;
    background-color: var(--accent-color);
    transition: all var(--transition-speed);
  }
  
  .nav-btn:hover::after {
    width: 80%;
    left: 10%;
  }
  
  .dropdown-content {
    display: none;
    position: absolute;
    right: 0;
    background: #1d2336;
    min-width: 160px;
    border-radius: 12px;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
    top: 50px;
    z-index: 1000;
    overflow: hidden;
    transform: translateY(10px);
    opacity: 0;
    transition: all var(--transition-speed);
  }
  
  .dropdown-content a {
    color: var(--text-color);
    padding: 12px 18px;
    text-decoration: none;
    display: block;
    border-bottom: 1px solid #343654;
    transition: background-color var(--transition-speed);
  }
  
  .dropdown-content a:hover {
    background-color: rgba(255, 255, 255, 0.1);
  }
  
  .dropdown-content a:last-child {
    border-bottom: none;
  }
  
  .nav-buttons .more-options:hover .dropdown-content,
  .nav-buttons .profile-btn.show-menu + .dropdown-content {
    display: block;
    opacity: 1;
    transform: translateY(0);
  }
  
  /* Enhanced Banner */
  .banner {
    height: 539px;
    background: #222739;
    margin: 0;
    padding: 0;
    overflow: hidden;
    position: relative;
  }
  
  .banner::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to bottom, rgba(0,0,0,0.2), rgba(0,0,0,0.5));
    z-index: 1;
  }
  
  .banner img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    transition: transform 10s ease;
  }
  
  .banner:hover img {
    transform: scale(1.05);
  }
  
  /* Enhanced Description */
  .desc-section {
    height: 433px;
    background: #1c2236;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 36px;
    position: relative;
    overflow: hidden;
  }
  
  .desc-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at 90% 50%, rgba(58, 87, 138, 0.3), transparent 70%);
    z-index: 0;
  }
  
  .desc-text {
    flex: 2;
    display: flex;
    flex-direction: column;
    justify-content: center;
    text-align: left;
    gap: 32px;
    position: relative;
    z-index: 1;
  }
  
  .desc-text h1 {
    font-size: 2.5rem;
    background: linear-gradient(to right, #fff, var(--accent-color));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: fadeIn 1s ease;
  }
  
  .desc-text p {
    font-size: 1.3rem;
    max-width: 560px;
    white-space: pre-line;
    line-height: 1.6;
    animation: slideIn 1s ease;
  }
  
  .desc-img {
    flex: 1;
    display: flex;
    justify-content: flex-end;
    align-items: center;
    height: 100%;
    position: relative;
    z-index: 1;
  }
  
  .desc-img img {
    max-width: 85%;
    max-height: 370px;
    border-radius: 18px;
    background: #283050;
    object-fit: contain;
    border: 2px solid #344261;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
    transition: all var(--transition-speed);
  }
  
  .desc-img img:hover {
    transform: translateY(-5px) rotate(2deg);
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
  }
  
  /* Enhanced Cards Section */
  .cards-section {
    display: flex;
    gap: 32px;
    justify-content: center;
    align-items: stretch;
    background-image: url('https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=1200&q=80');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    width: 100vw;
    min-height: 500px;
    padding: 40px;
    overflow-x: auto;
    position: relative;
  }
  
  .cards-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    z-index: 0;
  }
  
  .card {
    background: var(--card-bg);
    border-radius: 16px;
    min-width: 280px;
    max-width: 320px;
    height: auto;
    display: flex;
    flex-direction: column;
    color: var(--text-color);
    overflow: hidden;
    cursor: pointer;
    transition: all var(--transition-speed);
    position: relative;
    z-index: 1;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(10px);
  }
  
  .card:hover {
    transform: translateY(-10px) scale(1.02);
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
  }
  
  .card-image-container {
    height: 170px;
    width: 100%;
    overflow: hidden;
    position: relative;
  }
  
  .card-image-container img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-top-left-radius: 16px;
    border-top-right-radius: 16px;
    transition: transform 0.5s ease;
  }
  
  .card:hover .card-image-container img {
    transform: scale(1.1);
  }
  
  .card-content {
    padding: 22px;
    flex-grow: 1;
    text-align: center;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }
  
  .card-content h3 {
    margin: 0;
    font-size: 1.4rem;
    font-weight: 600;
  }
  
  .card-content p {
    font-size: 1rem;
    white-space: pre-line;
    line-height: 1.5;
    flex-grow: 1;
  }
  
  .card-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.95rem;
    opacity: 0.92;
    padding: 0 22px 18px 22px;
  }
  
  .card-footer .views,
  .card-footer .likes {
    display: flex;
    align-items: center;
    gap: 7px;
  }
  
  .card-footer .likes {
    cursor: pointer;
    transition: color var(--transition-speed);
  }
  
  .card-footer .likes:hover {
    color: #ff5a5a;
  }
  
  /* Enhanced Collaborators */
  .collaborators-wrap {
    background: #252d42;
    padding: 50px 60px;
    min-height: 260px;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: flex-start;
  }
  
  .collaborators-title {
    font-size: 1.8rem;
    color: var(--accent-color);
    margin-bottom: 22px;
    font-weight: 600;
    letter-spacing: 1px;
    position: relative;
    padding-bottom: 10px;
  }
  
  .collaborators-title::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 60px;
    height: 3px;
    background: var(--accent-color);
  }
  
  .collaborators-section {
    width: 100%;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 32px;
    justify-items: center;
    align-items: center;
    margin-top: 10px;
  }
  
  .collaborator-logo-box {
    background: linear-gradient(135deg, #192135 55%, #2e3c5c);
    box-shadow: 0 0 18px #171d2c55;
    border-radius: 26px;
    width: 140px;
    height: 140px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 16px;
    transition: all var(--transition-speed);
    border: 2px solid #e9c46a;
    position: relative;
    overflow: hidden;
  }
  
  .collaborator-logo-box::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(to bottom right, rgba(255,255,255,0.2), transparent);
    transform: rotate(45deg);
    z-index: 0;
  }
  
  .collaborator-logo-box:hover {
    box-shadow: 0 0 22px var(--accent-color);
    transform: translateY(-5px);
  }
  
  .collaborator-logo-box img {
    width: 90px;
    height: 90px;
    object-fit: contain;
    border-radius: 14px;
    background: #243049;
    margin-bottom: 7px;
    position: relative;
    z-index: 1;
    transition: transform var(--transition-speed);
  }
  
  .collaborator-logo-box:hover img {
    transform: scale(1.1);
  }
  
  .collaborator-label {
    font-size: 0.96rem;
    color: var(--text-color);
    text-align: center;
    margin-top: 2px;
    white-space: nowrap;
    position: relative;
    z-index: 1;
  }
  
  /* Enhanced Footer */
  .footer {
    min-height: 300px;
    background: linear-gradient(90deg, #181f2b 60%, #232e44 100%);
    color: var(--text-color);
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    align-items: center;
    padding-top: 40px;
    padding-bottom: 24px;
    gap: 18px;
    font-size: 1.1rem;
    letter-spacing: 1px;
    border-top: 2px solid #163053;
    position: relative;
  }
  
  .footer::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100" opacity="0.05"><circle cx="50" cy="50" r="40" fill="white"/></svg>');
    background-size: 200px;
    z-index: 0;
  }
  
  .footer-links {
    display: flex;
    gap: 44px;
    position: relative;
    z-index: 1;
  }
  
  .footer-links a {
    color: var(--text-color);
    font-size: 2.1rem;
    text-decoration: none;
    padding: 0 4px;
    transition: all var(--transition-speed);
    position: relative;
  }
  
  .footer-links a::after {
    content: '';
    position: absolute;
    bottom: -5px;
    left: 0;
    width: 0;
    height: 2px;
    background: var(--accent-color);
    transition: width var(--transition-speed);
  }
  
  .footer-links a:hover {
    color: var(--accent-color);
    transform: translateY(-5px);
  }
  
  .footer-links a:hover::after {
    width: 100%;
  }
  
  .footer-legal {
    margin-top: 16px;
    display: flex;
    gap: 38px;
    font-size: 1rem;
    color: #aaa;
    position: relative;
    z-index: 1;
  }
  
  .footer-legal a {
    color: #aaa;
    text-decoration: none;
    font-weight: 600;
    transition: color var(--transition-speed);
  }
  
  .footer-legal a:hover {
    color: var(--accent-color);
    text-decoration: underline;
  }
  
  .support-email {
    font-size: 1.15rem;
    color: #6cdbf7;
    margin-top: 12px;
    letter-spacing: 2px;
    user-select: text;
    position: relative;
    z-index: 1;
    transition: all var(--transition-speed);
  }
  
  .support-email:hover {
    color: var(--accent-color);
    letter-spacing: 3px;
  }
  
  /* Animations */
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  @keyframes slideIn {
    from { transform: translateX(-20px); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
  }
  
  @keyframes float {
    0% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
    100% { transform: translateY(0px); }
  }
  
  /* Scrollbar styling */
  ::-webkit-scrollbar {
    width: 10px;
  }
  
  ::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.1);
  }
  
  ::-webkit-scrollbar-thumb {
    background: var(--accent-color);
    border-radius: 5px;
  }
  
  ::-webkit-scrollbar-thumb:hover {
    background: #e09e42;
  }
  
  /* Responsive adjustments */
  @media (max-width: 992px) {
    .desc-section {
      flex-direction: column;
      height: auto;
      padding: 40px 20px;
      gap: 30px;
    }
    
    .desc-text {
      text-align: center;
      align-items: center;
    }
    
    .desc-img {
      justify-content: center;
    }
    
    .desc-img img {
      max-width: 100%;
    }
    
    .cards-section {
      flex-direction: column;
      align-items: center;
      overflow-x: visible;
      overflow-y: auto;
    }
    
    .card {
      max-width: 100%;
      margin-bottom: 30px;
    }
  }
  
  @media (max-width: 768px) {
    .top-bar {
      flex-direction: column;
      height: auto;
      padding: 15px;
      gap: 15px;
    }
    
    .nav-buttons {
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
    }
    
    .collaborators-wrap {
      padding: 30px 20px;
    }
    
    .collaborators-section {
      grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
      gap: 20px;
    }
    
    .collaborator-logo-box {
      width: 110px;
      height: 110px;
    }
    
    .footer-links {
      gap: 25px;
    }
    
    .footer-legal {
      flex-direction: column;
      gap: 15px;
      align-items: center;
    }
  }
</style>
<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-check-compat.js"></script>
<!-- reCaptcha -->
<script src="https://www.google.com/recaptcha/api.js?render=6Ld395IrAAAAAIvG4gyf0vUJeI_jKOsI9XVn0jUx"></script>
</head>
<body>
  <!-- Top Section -->
  <div class="top-bar">
    <div class="logo-title">
      <img
        src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/React-icon.svg/120px-React-icon.svg.png"
        height="46"
        alt="Logo"
      />
      GalaxyWeb
    </div>
    <div class="nav-buttons">
      <button class="nav-btn">uw gzbskzj</button>
      <button class="nav-btn">haosjj whhaj</button>
      <div class="more-options">
        <button class="nav-btn">wnus hcs ▼</button>
        <div class="dropdown-content">
          <a href="#">hx w</a>
          <a href="#">hg na</a>
          <a href="#">kzj lk</a>
        </div>
      </div>
      <button id="profileBtn" class="profile-btn"><i class="fa-solid fa-user"></i></button>
      <div id="profileMenu" class="dropdown-content" style="right: 30px; display:none;">
        <a href="#" id="profileLink">Profile</a>
        <a href="#" id="logoutLink">Logout</a>
      </div>
    </div>
  </div>

  <!-- Banner Section -->
  <div class="banner">
    <img
      src="https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=1200&q=80"
      alt="Galaxy Banner"
    />
  </div>

  <!-- Description Section -->
  <div class="desc-section">
    <div class="desc-text">
      <h1>uw gzbskzj haosjj</h1>
      <p>
        whhaj wnus hcs hx w whhaj wnus hcs hx w whhaj wnus hcs hx w whhaj wnus hcs
        hx w whhaj wnus hcs hx w whhaj wnus hcs hx w whhaj wnus hcs hx w
      </p>
    </div>
    <div class="desc-img">
      <img
        src="https://assets.stickpng.com/images/58429400a6515b1e0b6b1404.png"
        alt="Random PNG"
      />
    </div>
  </div>

  <!-- Cards Section -->
  <div id="cardsContainer" class="cards-section">
    <!-- Cards added dynamically here -->
  </div>

  <!-- Collaborators Section -->
  <div class="collaborators-wrap">
    <div class="collaborators-title">hamare lqwkq powkeqw</div>
    <div class="collaborators-section">
      <div class="collaborator-logo-box">
        <img
          src="https://upload.wikimedia.org/wikipedia/commons/4/44/Googlelogo.png"
          alt="lgwgo"
        />
        <div class="collaborator-label">pwwkq powkw</div>
      </div>
      <div class="collaborator-logo-box">
        <img
          src="https://upload.wikimedia.org/wikipedia/commons/a/a7/React-icon.svg"
          alt="rptpq"
        />
        <div class="collaborator-label">rpowkq</div>
      </div>
      <div class="collaborator-logo-box">
        <img
          src="https://upload.wikimedia.org/wikipedia/commons/6/6a/JavaScript-logo.png"
          alt="jspwo"
        />
        <div class="collaborator-label">ojqw powkeqw</div>
      </div>
    </div>
  </div>

  <!-- Footer Section -->
  <div class="footer">
    <div class="footer-links">
      <a href="https://twitter.com" title="Twitter"
        ><i class="fab fa-twitter"></i
      ></a>
      <a href="https://facebook.com" title="Facebook"
        ><i class="fab fa-facebook"></i
      ></a>
      <a href="https://instagram.com" title="Instagram"
        ><i class="fab fa-instagram"></i
      ></a>
      <a href="https://youtube.com" title="YouTube"
        ><i class="fab fa-youtube"></i
      ></a>
      <a href="https://discord.com" title="Discord"
        ><i class="fab fa-discord"></i
      ></a>
    </div>
    <div class="footer-legal">
      <a href="#">Privacy Policy</a>
      <a href="#">Terms & Conditions</a>
    </div>
    <div class="support-email">support@gmail.com</div>
    <span>&copy; 2025 GalaxyWeb. All rights reserved.</span>
  </div>

  <script>
    // Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyBV7Jg0BVzeCNQW9oiIiNItnejUsjj2DhA",
      authDomain: "squadvertex2007.firebaseapp.com",
      projectId: "squadvertex2007",
      storageBucket: "squadvertex2007.appspot.com",
      messagingSenderId: "168905083514",
      appId: "1:168905083514:web:c8bbe2ce9f87800a0f09c3",
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);

    // Activate App Check
    try {
      const appCheckProvider = new firebase.appCheck.ReCaptchaV3Provider(
        "6Ld395IrAAAAAIvG4gyf0vUJeI_jKOsI9XVn0jUx"
      );
      firebase.appCheck().activate(appCheckProvider, true);
      console.log(
        "App Check (compat) activated — reCaptcha v3 provider attached."
      );
    } catch (e) {
      console.warn("App Check activation failed (compat):", e);
    }

    const auth = firebase.auth();
    const db = firebase.firestore();

    const profileBtn = document.getElementById("profileBtn");
    const profileMenu = document.getElementById("profileMenu");

    profileBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      profileMenu.style.display =
        profileMenu.style.display === "block" ? "none" : "block";
    });

    // Close profile menu if clicked outside
    window.addEventListener("click", () => {
      profileMenu.style.display = "none";
    });

    // Sign-In Function (Google OAuth)
    async function signIn() {
      const provider = new firebase.auth.GoogleAuthProvider();
      try {
        await auth.signInWithPopup(provider);
      } catch (error) {
        alert("Sign-in failed: " + error.message);
      }
    }

    // Sign-Out Function
    async function signOut() {
      try {
        await auth.signOut();
      } catch (error) {
        alert("Sign-out failed: " + error.message);
      }
    }

    // Track current user
    let currentUser = null;
    auth.onAuthStateChanged((user) => {
      currentUser = user;
      updateProfileButton();
      loadCards();
    });

    // Update Profile Button (show sign in or profile icon)
    function updateProfileButton() {
      if (currentUser) {
        profileBtn.innerHTML = '<i class="fa-solid fa-user"></i>';
        // Logout link inside the menu
        document.getElementById("logoutLink").onclick = async (e) => {
          e.preventDefault();
          await signOut();
        };
        // Profile link placeholder
        document.getElementById("profileLink").onclick = (e) => {
          e.preventDefault();
          alert("Profile clicked - implement profile page.");
        };
      } else {
        profileBtn.innerHTML = "Sign In";
        profileBtn.onclick = signIn;
      }
    }

    // Increment views once per session per card for visitor
    let visitedCards =
      JSON.parse(sessionStorage.getItem("visitedCards")) || [];

    // Load cards from Firestore
    async function loadCards() {
      const cardsContainer = document.getElementById("cardsContainer");
      cardsContainer.innerHTML = "";

      const snapshot = await db
        .collection("cards")
        .orderBy("publishedAt", "desc")
        .limit(3)
        .get();

      snapshot.docs.forEach((doc) => {
        const data = doc.data();
        const id = doc.id;

        // Increment views once if not visited this session
        if (!visitedCards.includes(id)) {
          db.collection("cards").doc(id).update({
            views: firebase.firestore.FieldValue.increment(1),
          });
          visitedCards.push(id);
          sessionStorage.setItem(
            "visitedCards",
            JSON.stringify(visitedCards)
          );
        }

        const card = createCard(
          id,
          data.heading,
          data.description,
          data.views || 0,
          data.likes || 0,
          data.imageUrl || ""
        );
        cardsContainer.appendChild(card);
      });
    }

    // Create a card element
    function createCard(id, heading, description, views, likes, imageUrl) {
      const card = document.createElement("div");
      card.className = "card";
      card.tabIndex = 0;
      card.setAttribute("role", "button");

      card.addEventListener("click", () => {
        window.location.href = `https://www.squadvertex.great-site.net/cards?id=${id}`;
      });
      card.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
          card.click();
        }
      });

      // Card image container
      const imageContainer = document.createElement("div");
      imageContainer.className = "card-image-container";
      
      // Card image
      const img = document.createElement("img");
      img.src = imageUrl || "https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=500&q=80";
      img.alt = heading;
      imageContainer.appendChild(img);
      card.appendChild(imageContainer);

      // Content container
      const content = document.createElement("div");
      content.className = "card-content";

      const h3 = document.createElement("h3");
      h3.textContent = heading || "uw gzbskzj haosjj";

      const p = document.createElement("p");
      p.textContent = description || "whhaj wnus hcs hx w whhaj hcs woqw kjqw qowq pwq.";

      content.appendChild(h3);
      content.appendChild(p);
      card.appendChild(content);

      // Footer container (views and likes)
      const footer = document.createElement("div");
      footer.className = "card-footer";

      // Views
      const viewsSpan = document.createElement("span");
      viewsSpan.className = "views";
      viewsSpan.innerHTML = `<i class="fa-regular fa-eye"></i> ${views}`;
      footer.appendChild(viewsSpan);

      // Likes (if logged in only)
      const likesSpan = document.createElement("span");
      likesSpan.className = "likes";
      likesSpan.style.cursor = currentUser ? "pointer" : "not-allowed";
      likesSpan.title = currentUser ? "Like" : "Sign In to Like";
      likesSpan.innerHTML = `<i class="fa-regular fa-heart"></i> ${likes}`;

      likesSpan.addEventListener("click", async (e) => {
        e.stopPropagation();
        if (!currentUser) {
          alert("Please sign in to like.");
          return;
        }
        // Check if user has liked already
        const likeDoc = await db
          .collection("cards")
          .doc(id)
          .collection("likes")
          .doc(currentUser.uid)
          .get();

        if (likeDoc.exists) {
          alert("You have already liked this card.");
          return;
        }
        try {
          // Add like doc
          await db.collection("cards").doc(id).collection("likes").doc(currentUser.uid).set({
            likedAt: firebase.firestore.FieldValue.serverTimestamp(),
          });
          // Increment likes count
          await db.collection("cards").doc(id).update({
            likes: firebase.firestore.FieldValue.increment(1),
          });
          // Update UI
          const newLikes = likes + 1;
          likesSpan.innerHTML = `<i class="fa-regular fa-heart"></i> ${newLikes}`;
          likesSpan.style.cursor = "default";
          likesSpan.title = "You liked this";
        } catch (err) {
          alert("Error liking card: " + err.message);
        }
      });

      footer.appendChild(likesSpan);
      card.appendChild(footer);

      return card;
    }
  </script>
</body>
</html>
