<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Admission Central Page</title>
    <!-- Bootstrap 5 CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background-color: #f8f9fa;
        font-family: Arial, sans-serif;
      }
      .content-container {
        margin: 50px auto;
        max-width: 800px;
      }
      .instructions {
        margin-bottom: 30px;
      }
    </style>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">SchoolMS</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarContent"
          aria-controls="navbarContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarContent">
          <ul class="navbar-nav me-auto">
            <li class="nav-item"><a class="nav-link" href="index.html">Dashboard</a></li>
            <li class="nav-item"><a class="nav-link" href="admissions.html">Admissions</a></li>
            <li class="nav-item"><a class="nav-link" href="staff.html">Staff</a></li>
            <li class="nav-item active"><a class="nav-link" href="attendance.html">Attendance</a></li>
            <li class="nav-item"><a class="nav-link" href="classes.html">Classes</a></li>
            <li class="nav-item"><a class="nav-link" href="exams.html">Exams</a></li>
            <li class="nav-item"><a class="nav-link" href="library.html">Library</a></li>
            <li class="nav-item">
              <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">
                Transport <span class="bi bi-lock"></span>
              </a>
            </li>
            <li class="nav-item"><a class="nav-link" href="hostel.html">Hostel</a></li>
            <li class="nav-item"><a class="nav-link" href="communications.html">Communications</a></li>
            <li class="nav-item"><a class="nav-link" href="inventory.html">Inventory</a></li>
            <li class="nav-item"><a class="nav-link" href="events.html">Events</a></li>
            <li class="nav-item"><a class="nav-link" href="admin.html">Admin</a></li>
            <li class="nav-item"><a class="nav-link" href="reports.html">Reports</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <div class="container content-container">
      <h1 class="mt-5 mb-4 text-center">Admission Central Page</h1>
      <div class="instructions">
        <p>
          Welcome to the central hub between the Admin Dashboard and the Admissions interface.
          This page offers two main options:
        </p>
        <ul>
          <li>
            <strong>Student Admission:</strong> For enrolling new students into the system.
          </li>
          <li>
            <strong>Staff Admission:</strong> For adding new staff members and their details.
          </li>
        </ul>
        <p>
          Please note that the admissions process is governed by your institution's policies.
          The actual forms and data entry will capture all necessary details like personal info, academic records, etc.
          The responsibility for maintaining these records lies with the respective departments.
        </p>
        <p>
          Before these options are activated, the system checks the <code>001-school/systemSettings</code> document's <code>modules.admission</code> field.
          If this field is set to <code>true</code>, the admissions buttons will be enabled.
          Otherwise, they remain disabled.
        </p>
      </div>

      <!-- Admission Buttons -->
      <div class="d-flex justify-content-center gap-4">
        <button id="studentAdmissionBtn" class="btn btn-primary btn-lg" disabled>
          Student Admission
        </button>
        <button id="staffAdmissionBtn" class="btn btn-success btn-lg" disabled>
          Staff Admission
        </button>
      </div>
      <!-- Status Message -->
      <div class="mt-4 text-center" id="statusMessage">
        Checking system settings...
      </div>
    </div>

    <!-- Bootstrap 5 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // Simulated function to fetch system settings from the database.
      function fetchSystemSettings() {
        return new Promise((resolve, reject) => {
          // Simulate a delay to mimic async data fetching.
          setTimeout(() => {
            // Dummy settings object.
            // Change 'admission' to false to simulate a disabled admission module.
            const systemSettings = {
              modules: {
                admission: true
              }
            };
            resolve(systemSettings);
          }, 1500);
        });
      }

      // Update buttons based on system settings.
      fetchSystemSettings().then(settings => {
        const admissionEnabled = settings.modules.admission;
        const studentBtn = document.getElementById('studentAdmissionBtn');
        const staffBtn = document.getElementById('staffAdmissionBtn');
        const statusMessage = document.getElementById('statusMessage');

        if (admissionEnabled) {
          studentBtn.disabled = false;
          staffBtn.disabled = false;
          statusMessage.textContent = "Admissions module is enabled. You may proceed with admissions.";
        } else {
          studentBtn.disabled = true;
          staffBtn.disabled = true;
          statusMessage.textContent = "Admissions module is currently disabled in system settings.";
        }
      }).catch(err => {
        document.getElementById('statusMessage').textContent = "Error fetching system settings.";
      });
    </script>
  </body>
</html>