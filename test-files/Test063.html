<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>GitHub Repo Analyzer â€” SquadVertex (Modular)</title>
    
    <!-- External CSS -->
    <link rel="stylesheet" href="styles01.css">
    
    <!-- Prism.js for syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="header card">
            <h1>ğŸš€ GitHub Repo Analyzer â€” SquadVertex (Modular)</h1>
            <div style="color:var(--muted);margin-top:6px">Modular Design â€¢ Lazy Content Fetch â€¢ Rate Limit Aware â€¢ Syntax Highlighting â€¢ Advanced Stats</div>
        </div>

        <div class="controls">
            <div class="card">
                <div style="margin-bottom:10px"><strong>Repository</strong></div>
                <input id="owner" class="input" placeholder="owner" value="PRINCE16082007">
                <input id="repo" class="input" placeholder="repo" value="SquadVertex">
                <input id="branch" class="input" placeholder="branch" value="main">
                <input id="root" class="input" placeholder="root path (optional)" value="test-files">

                <div style="display:flex;gap:8px;margin-top:8px">
                    <input id="extensions" class="input" style="flex:1" placeholder=".js,.py" value=".js,.ts,.py,.html,.css,.json,.md">
                </div>

                <div style="display:flex;gap:8px;margin-top:8px;align-items:center">
                    <input id="minSize" class="input" style="width:120px" type="number" placeholder="min size bytes" value="0">
                    <input id="maxContentFetch" class="input" style="width:120px" type="number" placeholder="content fetch N" value="10" title="Max files to fetch content for (0 = none)">
                </div>

                <div style="display:flex;gap:8px;margin-top:8px">
                    <input id="ghToken" class="input" placeholder="GitHub token (optional)" title="Use a personal token to increase rate limit">
                </div>

                <div style="display:flex;gap:8px;margin-top:8px">
                    <button id="analyzeBtn" class="btn">ğŸ”„ Analyze</button>
                    <button id="fetchTopContentBtn" class="btn small" style="background:linear-gradient(45deg,#60a5fa,#3b82f6)">ğŸ“„ Fetch top N file content</button>
                    <button id="exportBtn" class="btn small" style="background:linear-gradient(45deg,#4ade80,#22c55e)">ğŸ“¥ Export</button>
                </div>

                <div class="footer-note">
                    Tip: By default we do NOT fetch each file's content (lazy). Use "Fetch top N" or click a file to load content. This saves API tokens & bandwidth.
                </div>
            </div>

            <div class="card controls-right">
                <div style="margin-bottom:6px"><strong>Standard Stats</strong></div>
                <div class="bento-grid" id="standardStats">
                    <div class="stat-card loc-card">
                        <div class="stat-icon">ğŸ“</div>
                        <div class="stat-value" id="totalLoc">0</div>
                        <div class="stat-label">Lines of Code</div>
                    </div>
                    <div class="stat-card files-card">
                        <div class="stat-icon">ğŸ“</div>
                        <div class="stat-value" id="totalFiles">0</div>
                        <div class="stat-label">Total Files</div>
                    </div>
                    <div class="stat-card size-card">
                        <div class="stat-icon">ğŸ“Š</div>
                        <div class="stat-value" id="totalSize">0 Bytes</div>
                        <div class="stat-label">Total Size</div>
                    </div>
                    <div class="stat-card age-card">
                        <div class="stat-icon">ğŸ“…</div>
                        <div class="stat-value" id="repoAge">â€”</div>
                        <div class="stat-label">Repo Age</div>
                    </div>
                </div>

                <div style="margin-top:6px"><strong>Deep Insights</strong></div>
                <div id="deepInsights" style="color:var(--muted);font-size:13px">
                    <div>Language distribution: â€”</div>
                    <div>Avg file size: â€”</div>
                    <div>Last update: â€”</div>
                </div>

                <div style="margin-top:6px"><strong>Tech Stack</strong></div>
                <div id="techStack" class="tech-stack">
                    <span class="tech-badge">No data</span>
                </div>

                <div style="margin-top:6px"><strong>Search / Filter</strong></div>
                <input id="searchFilter" class="input" placeholder="Filter by filename or path">

                <div style="margin-top:6px"><strong>Charts</strong></div>
                <div style="display:flex;gap:8px">
                    <button id="showChartsBtn" class="btn small">Show charts</button>
                    <button id="loadCacheBtn" class="btn small" style="background:linear-gradient(45deg,#f59e0b,#f97316)">Load cache</button>
                </div>

                <div id="rateInfo" class="footer-note" style="margin-top:8px;color:var(--muted)"></div>
            </div>
        </div>

        <!-- Tabs -->
        <div class="card" style="margin-bottom:12px">
            <div class="tabs">
                <div class="tab active" data-tab="overview">ğŸ“ˆ Overview</div>
                <div class="tab" data-tab="files">ğŸ“ Files</div>
                <div class="tab" data-tab="charts">ğŸ“Š Charts</div>
                <div class="tab" data-tab="details">ğŸ“‹ Details</div>
                <div class="tab" data-tab="fun">ğŸ¯ Advanced</div>
            </div>

            <!-- Overview: now contains the stats + small summary -->
            <div id="overview" class="tab-content active">
                <div style="display:flex;gap:12px;flex-wrap:wrap">
                    <div style="flex:1">
                        <h3 style="margin-bottom:8px">Summary</h3>
                        <div id="summaryText" style="color:var(--muted)">No analysis run yet.</div>
                    </div>
                    <div style="width:360px">
                        <h3 style="margin-bottom:8px">Top files</h3>
                        <div id="topFilesList" style="color:var(--muted)">â€”</div>
                    </div>
                </div>
            </div>

            <!-- Files table -->
            <div id="files" class="tab-content">
                <div class="table">
                    <table>
                        <thead><tr><th>Name</th><th>Path</th><th>Size</th><th>Type</th><th>Lines</th><th>Actions</th></tr></thead>
                        <tbody id="filesTableBody"></tbody>
                    </table>
                </div>
                <div id="filesNote" style="color:var(--muted);margin-top:8px">Click ğŸ” to load file content (this will perform a single request for that file).</div>
            </div>

            <!-- Charts -->
            <div id="charts" class="tab-content">
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
                    <div class="chart-container"><canvas id="typeChart"></canvas></div>
                    <div class="chart-container"><canvas id="sizeChart"></canvas></div>
                    <div class="chart-container"><canvas id="locChart"></canvas></div>
                    <div class="chart-container"><canvas id="languageChart"></canvas></div>
                </div>
            </div>

            <!-- Details -->
            <div id="details" class="tab-content">
                <div id="fileDetailsInner" style="color:var(--muted)">Select a file to view details.</div>
            </div>

            <!-- Advanced Stats -->
            <div id="fun" class="tab-content">
                <div id="advancedStatsContainer">
                    <h3 style="margin-bottom:12px">Advanced Analysis</h3>
                    <div id="advancedStatsContent" style="color:var(--muted);text-align:center;">Run analysis to see advanced stats!</div>
                </div>
            </div>
        </div>

        <div id="loading" class="loading" style="display:none"></div>
        <div id="error" class="error" style="display:none"></div>
    </div>

    <!-- External JavaScript -->
    <script src="logic1.js"></script>
</body>
</html>