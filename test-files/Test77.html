<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Admin â€“ SquadVertex Video Control</title>
  <style>
    body { font-family: sans-serif; padding: 2rem; max-width: 500px; margin: auto; }
    input, button { display: block; width: 100%; margin: .5rem 0; padding: .5rem; }
  </style>
  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
</head>
<body>
  <h1>ðŸŽ® Admin Panel</h1>

  <div id="login">
    <input id="email" type="email" placeholder="Admin Email">
    <input id="pass" type="password" placeholder="Password">
    <button id="btnLogin">Log In</button>
  </div>

  <div id="controls" style="display:none;">
    <h2>Set Active Video</h2>
    <input id="videoId" placeholder="Enter Wistia Video ID">
    <button id="btnSet">Update Live Stream</button>

    <p>Currently Live: <strong><span id="current">â€“</span></strong></p>
  </div>

  <script>
    // â”€â”€ 1) Initialize Firebase â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      // Firebase initialization
  const firebaseConfig = {
    apiKey: "AIzaSyBV7Jg0BVzeCNQW9oiIiNItnejUsjj2DhA",
    authDomain: "squadvertex2007.firebaseapp.com",
    projectId: "squadvertex2007",
    storageBucket: "squadvertex2007.appspot.com",
    messagingSenderId: "168905083514",
    appId: "1:168905083514:web:c8bbe2ce9f87800a0f09c3",
  };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db   = firebase.firestore();

    // Use a fixed event ID for now:
    const EVENT_ID = 'SpringLaunch2025';
    const eventRef    = db.collection('events').doc(EVENT_ID);
    const settingsRef = eventRef.collection('settings').doc('activeVideo');

    // â”€â”€ 2) Log in as Admin â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    document.getElementById('btnLogin').onclick = () => {
      const email = document.getElementById('email').value;
      const pass  = document.getElementById('pass').value;
      auth.signInWithEmailAndPassword(email, pass)
        .then(() => {
          document.getElementById('login').style.display    = 'none';
          document.getElementById('controls').style.display = 'block';
          loadCurrent();
        })
        .catch(err => alert('Login failed: ' + err.message));
    };

    // â”€â”€ 3) Load & display current activeVideo â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function loadCurrent(){
      settingsRef.onSnapshot(doc => {
        const vid = doc.data()?.videoId || 'None';
        document.getElementById('current').innerText = vid;
      });
    }

    // â”€â”€ 4) Set a new activeVideo â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    document.getElementById('btnSet').onclick = () => {
      const newId = document.getElementById('videoId').value.trim();
      if (!newId) return alert('Enter a Wistia Video ID');
      settingsRef.set({ videoId: newId, setAt: Date.now() })
        .then(() => alert('Live video updated!'))
        .catch(err => alert('Error: ' + err.message));
    };
  </script>
</body>
</html>