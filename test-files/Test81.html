<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin - SquadVertex Workflow Scheduler</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #4361ee;
      --secondary: #3f37c9;
      --accent: #4895ef;
      --dark: #1a1f36;
      --light: #f8f9fa;
      --success: #4cc9f0;
      --danger: #f72585;
      --warning: #f8961e;
      --gray: #6c757d;
      --border: #e2e8f0;
      --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      --transition: all 0.3s ease;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
      color: var(--dark);
      line-height: 1.6;
      padding: 0;
      min-height: 100vh;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
      background: white;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    
    header {
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      color: white;
      padding: 1.5rem 2rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
      font-weight: 700;
      font-size: 1.8rem;
    }
    
    .logo-icon {
      width: 42px;
      height: 42px;
      background: var(--accent);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .header-info {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 4px;
      font-size: 0.9rem;
    }
    
    .status-indicator {
      display: flex;
      align-items: center;
      gap: 6px;
      background: rgba(255, 255, 255, 0.15);
      padding: 4px 12px;
      border-radius: 20px;
    }
    
    .status-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #4ade80;
    }
    
    .time-display {
      font-weight: 600;
      letter-spacing: 0.5px;
    }
    
    .header-actions {
      display: flex;
      gap: 12px;
    }
    
    .btn {
      padding: 0.8rem 1.5rem;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .btn-primary {
      background: var(--accent);
      color: white;
    }
    
    .btn-primary:hover {
      background: #3a7de0;
      transform: translateY(-2px);
    }
    
    .btn-success {
      background: var(--success);
      color: white;
    }
    
    .btn-success:hover {
      background: #3ab4d9;
    }
    
    .btn-danger {
      background: var(--danger);
      color: white;
    }
    
    .btn-danger:hover {
      background: #e21a6d;
    }
    
    .main-content {
      display: flex;
      flex-direction: column;
      gap: 2rem;
      padding: 2rem;
      flex: 1;
    }
    
    .section {
      background: white;
      border-radius: 16px;
      box-shadow: var(--card-shadow);
      overflow: hidden;
      transition: var(--transition);
    }
    
    .section:hover {
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
    }
    
    .section-header {
      padding: 1.5rem;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #f8f9ff;
    }
    
    .section-header h2 {
      color: var(--secondary);
      font-size: 1.5rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .section-body {
      padding: 1.5rem;
    }
    
    .form-group {
      margin-bottom: 1.5rem;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: var(--dark);
    }
    
    .form-control {
      width: 100%;
      padding: 0.8rem 1rem;
      border: 1px solid var(--border);
      border-radius: 8px;
      font-size: 1rem;
      transition: var(--transition);
    }
    
    .form-control:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
    }
    
    .video-stats {
      display: flex;
      gap: 1rem;
      margin: 1rem 0;
      padding: 1rem;
      background: #f8f9ff;
      border-radius: 8px;
    }
    
    .stat-item {
      flex: 1;
      text-align: center;
      padding: 0.8rem;
      border-radius: 8px;
      background: white;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }
    
    .stat-item h3 {
      font-size: 1.8rem;
      margin-bottom: 0.3rem;
      color: var(--primary);
    }
    
    .video-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: 1.5rem;
      margin-top: 1rem;
    }
    
    .video-card {
      display: flex;
      flex-direction: column;
      border: 1px solid var(--border);
      border-radius: 12px;
      overflow: hidden;
      transition: var(--transition);
      background: white;
      box-shadow: 0 4px 8px rgba(0,0,0,0.05);
    }
    
    .video-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 16px rgba(67, 97, 238, 0.15);
    }
    
    .video-thumb {
      position: relative;
      height: 180px;
      overflow: hidden;
    }
    
    .video-thumb img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s ease;
    }
    
    .video-card:hover .video-thumb img {
      transform: scale(1.05);
    }
    
    .video-status {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(0,0,0,0.7);
      color: white;
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 0.8rem;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    .video-status.active .status-dot {
      background: #4ade80;
    }
    
    .video-status.inactive .status-dot {
      background: #f97316;
    }
    
    .video-meta {
      padding: 1rem;
    }
    
    .video-meta h3 {
      font-size: 1.2rem;
      margin-bottom: 0.5rem;
      color: var(--dark);
    }
    
    .video-meta p {
      color: var(--gray);
      font-size: 0.9rem;
      margin-bottom: 0.5rem;
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin: 1rem 0;
    }
    
    .stat-box {
      background: #f0f7ff;
      border-radius: 8px;
      padding: 0.5rem;
      text-align: center;
    }
    
    .stat-value {
      font-size: 1.2rem;
      font-weight: bold;
      color: var(--primary);
    }
    
    .stat-label {
      font-size: 0.75rem;
      color: var(--gray);
    }
    
    .video-actions {
      display: flex;
      gap: 8px;
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid var(--border);
    }
    
    .action-btn {
      flex: 1;
      padding: 0.6rem;
      border: none;
      border-radius: 8px;
      background: #f0f2f5;
      color: var(--dark);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      transition: var(--transition);
      font-weight: 500;
    }
    
    .action-btn:hover {
      background: var(--accent);
      color: white;
    }
    
    .schedule-container {
      margin-top: 2rem;
    }
    
    .schedule-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }
    
    .schedule-list {
      border: 1px solid var(--border);
      border-radius: 8px;
      overflow: hidden;
    }
    
    .schedule-item {
      display: flex;
      align-items: center;
      padding: 1rem;
      border-bottom: 1px solid var(--border);
      background: white;
      transition: var(--transition);
    }
    
    .schedule-item:hover {
      background: #f8f9ff;
    }
    
    .schedule-item:last-child {
      border-bottom: none;
    }
    
    .schedule-type {
      width: 120px;
      padding: 0.5rem;
      text-align: center;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
      margin-right: 1rem;
    }
    
    .type-timer {
      background: rgba(248, 150, 30, 0.15);
      color: #f8961e;
    }
    
    .type-intro {
      background: rgba(67, 97, 238, 0.15);
      color: var(--primary);
    }
    
    .type-creator {
      background: rgba(76, 201, 240, 0.15);
      color: var(--success);
    }
    
    .type-pause {
      background: rgba(108, 117, 125, 0.15);
      color: var(--gray);
    }
    
    .type-voting {
      background: rgba(247, 37, 133, 0.15);
      color: var(--danger);
    }
    
    .schedule-details {
      flex: 1;
    }
    
    .schedule-details h4 {
      margin-bottom: 0.25rem;
    }
    
    .schedule-duration {
      font-size: 0.9rem;
      color: var(--gray);
    }
    
    .schedule-actions {
      display: flex;
      gap: 8px;
    }
    
    .schedule-btn {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      border: none;
      background: #f0f2f5;
      color: var(--dark);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
    }
    
    .schedule-btn:hover {
      background: var(--accent);
      color: white;
    }
    
    .schedule-form {
      background: #f8f9ff;
      padding: 1.5rem;
      border-radius: 8px;
      margin-top: 1.5rem;
    }
    
    .form-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-bottom: 1rem;
    }
    
    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 1rem 1.5rem;
      background: var(--success);
      color: white;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      display: flex;
      align-items: center;
      gap: 10px;
      transform: translateY(100px);
      opacity: 0;
      transition: all 0.4s ease;
      z-index: 1000;
    }
    
    .toast.show {
      transform: translateY(0);
      opacity: 1;
    }
    
    .toast i {
      font-size: 1.2rem;
    }
    
    .no-videos {
      text-align: center;
      padding: 2rem;
      color: var(--gray);
      grid-column: 1 / -1;
    }
    
    .loading-spinner {
      display: inline-block;
      width: 24px;
      height: 24px;
      border: 3px solid rgba(67, 97, 238, 0.3);
      border-radius: 50%;
      border-top-color: var(--primary);
      animation: spin 1s ease-in-out infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    footer {
      text-align: center;
      padding: 1.5rem;
      color: var(--gray);
      font-size: 0.9rem;
      border-top: 1px solid var(--border);
      background: #f8f9ff;
    }
    
    .branding {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 8px;
      margin-top: 5px;
    }
    
    .branding span {
      font-weight: 600;
      color: var(--primary);
    }
  </style>
  
  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <!-- Wistia Player -->
  <script src="https://fast.wistia.com/assets/external/E-v1.js" async></script>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">
        <div class="logo-icon">
          <i class="fas fa-video"></i>
        </div>
        <div>
          <div>SquadVertex Workflow Scheduler</div>
          <div style="font-size: 0.9rem; opacity: 0.9;">Administrator Panel</div>
        </div>
      </div>
      
      <div class="header-info">
        <div class="status-indicator">
          <div class="status-dot"></div>
          <span id="connection-status">Connected to Firebase</span>
        </div>
        <div class="time-display">
          <span id="local-time">Loading local time...</span>
        </div>
      </div>
      
      <div class="header-actions">
        <button class="btn btn-success" id="btnSaveSchedule">
          <i class="fas fa-save"></i> Save Schedule
        </button>
        <button class="btn btn-danger" id="btnClearActive">
          <i class="fas fa-stop-circle"></i> Clear Active
        </button>
      </div>
    </header>
    
    <div class="main-content">
      <!-- Video Library Section -->
      <div class="section">
        <div class="section-header">
          <h2><i class="fas fa-film"></i> Video Library</h2>
          <div id="video-count">0 videos</div>
        </div>
        <div class="section-body">
          <div class="form-group">
            <label for="addVideoId">Add Wistia Video</label>
            <div style="display: flex; gap: 10px;">
              <input type="text" id="addVideoId" class="form-control" placeholder="Enter Wistia video ID">
              <button class="btn btn-primary" id="btnAddVideo" style="width: auto;">
                <i class="fas fa-plus-circle"></i> Add
              </button>
            </div>
          </div>
          
          <div class="video-stats">
            <div class="stat-item">
              <h3 id="totalCount">0</h3>
              <p>Total Videos</p>
            </div>
            <div class="stat-item">
              <h3 id="activeCount">0</h3>
              <p>Active Now</p>
            </div>
            <div class="stat-item">
              <h3 id="viewCount">0</h3>
              <p>Total Views</p>
            </div>
          </div>
          
          <div class="video-list" id="videoList">
            <div class="no-videos">
              <i class="fas fa-spinner fa-spin"></i>
              <p>Loading videos...</p>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Workflow Schedule Section -->
      <div class="section">
        <div class="section-header">
          <h2><i class="fas fa-calendar-alt"></i> Workflow Schedule</h2>
        </div>
        <div class="section-body">
          <div class="schedule-header">
            <h3>Event Timeline</h3>
            <button class="btn btn-primary" id="btnAddToSchedule">
              <i class="fas fa-plus"></i> Add to Schedule
            </button>
          </div>
          
          <div class="schedule-list" id="scheduleList">
            <div class="schedule-item">
              <div class="schedule-type type-timer">TIMER</div>
              <div class="schedule-details">
                <h4>Pre-Event Countdown</h4>
                <p class="schedule-duration">Duration: 10 minutes</p>
              </div>
              <div class="schedule-actions">
                <button class="schedule-btn"><i class="fas fa-edit"></i></button>
                <button class="schedule-btn"><i class="fas fa-trash"></i></button>
              </div>
            </div>
            
            <div class="schedule-item">
              <div class="schedule-type type-intro">INTRO</div>
              <div class="schedule-details">
                <h4>SquadVertex Introduction</h4>
                <p class="schedule-duration">Video: wistia_123abc</p>
              </div>
              <div class="schedule-actions">
                <button class="schedule-btn"><i class="fas fa-edit"></i></button>
                <button class="schedule-btn"><i class="fas fa-trash"></i></button>
              </div>
            </div>
            
            <div class="schedule-item">
              <div class="schedule-type type-creator">CREATOR VIDEO</div>
              <div class="schedule-details">
                <h4>Creator 1 Presentation</h4>
                <p class="schedule-duration">Video: wistia_456def</p>
              </div>
              <div class="schedule-actions">
                <button class="schedule-btn"><i class="fas fa-edit"></i></button>
                <button class="schedule-btn"><i class="fas fa-trash"></i></button>
              </div>
            </div>
            
            <div class="schedule-item">
              <div class="schedule-type type-pause">PAUSE</div>
              <div class="schedule-details">
                <h4>Short Break</h4>
                <p class="schedule-duration">Duration: 2 minutes</p>
              </div>
              <div class="schedule-actions">
                <button class="schedule-btn"><i class="fas fa-edit"></i></button>
                <button class="schedule-btn"><i class="fas fa-trash"></i></button>
              </div>
            </div>
            
            <div class="schedule-item">
              <div class="schedule-type type-voting">VOTING</div>
              <div class="schedule-details">
                <h4>Final Voting Session</h4>
                <p class="schedule-duration">Duration: 5 minutes</p>
              </div>
              <div class="schedule-actions">
                <button class="schedule-btn"><i class="fas fa-edit"></i></button>
                <button class="schedule-btn"><i class="fas fa-trash"></i></button>
              </div>
            </div>
          </div>
          
          <div class="schedule-form">
            <h3>Add New Schedule Item</h3>
            <div class="form-row">
              <div class="form-group">
                <label for="scheduleType">Item Type</label>
                <select id="scheduleType" class="form-control">
                  <option value="timer">Pre-Event Timer</option>
                  <option value="intro">Intro Video</option>
                  <option value="creator_video">Creator Video</option>
                  <option value="pause">Pause/Break</option>
                  <option value="voting">Voting Session</option>
                </select>
              </div>
              
              <div class="form-group" id="videoIdField">
                <label for="scheduleVideoId">Select Video</label>
                <select id="scheduleVideoId" class="form-control">
                  <option value="">Select a video...</option>
                </select>
              </div>
              
              <div class="form-group" id="durationField">
                <label for="scheduleDuration">Duration (minutes)</label>
                <input type="number" id="scheduleDuration" class="form-control" min="1" value="5">
              </div>
            </div>
            
            <div class="form-group">
              <label for="scheduleTitle">Item Title</label>
              <input type="text" id="scheduleTitle" class="form-control" placeholder="Enter item title">
            </div>
            
            <button class="btn btn-primary" id="btnAddScheduleItem">
              <i class="fas fa-plus"></i> Add to Schedule
            </button>
          </div>
        </div>
      </div>
      
      <!-- Preview Section -->
      <div class="section">
        <div class="section-header">
          <h2><i class="fas fa-eye"></i> Preview & Controls</h2>
        </div>
        <div class="section-body">
          <div class="form-row">
            <div class="form-group">
              <label for="eventStartTime">Event Start Time</label>
              <input type="datetime-local" id="eventStartTime" class="form-control">
            </div>
            
            <div class="form-group">
              <label for="eventDuration">Total Event Duration</label>
              <input type="text" id="eventDuration" class="form-control" value="45 minutes" readonly>
            </div>
          </div>
          
          <div class="form-group">
            <label>Current Workflow Step</label>
            <div style="display: flex; gap: 10px; margin-top: 0.5rem;">
              <button class="btn" style="background: #f0f2f5; flex: 1;">
                <i class="fas fa-step-backward"></i> Previous
              </button>
              <button class="btn btn-success" style="flex: 2;">
                <i class="fas fa-play"></i> Start Event
              </button>
              <button class="btn" style="background: #f0f2f5; flex: 1;">
                Next <i class="fas fa-step-forward"></i>
              </button>
            </div>
          </div>
          
          <div class="video-stats">
            <div class="stat-item">
              <h3>9</h3>
              <p>Total Steps</p>
            </div>
            <div class="stat-item">
              <h3>1</h3>
              <p>Active Step</p>
            </div>
            <div class="stat-item">
              <h3>45</h3>
              <p>Minutes Total</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <footer>
      <p>© 2025 SquadVertex Live Stream Control. All rights reserved.</p>
      <div class="branding">
        <i class="fas fa-video"></i>
        <span>SquadVertex</span> Professional Streaming Platform
      </div>
    </footer>
  </div>
  
  <div class="toast" id="toast">
    <i class="fas fa-check-circle"></i>
    <span id="toastMessage">Operation completed successfully!</span>
  </div>

  <script>
    // Firebase initialization
    const firebaseConfig = {
      apiKey: "AIzaSyBV7Jg0BVzeCNQW9oiIiNItnejUsjj2DhA",
      authDomain: "squadvertex2007.firebaseapp.com",
      projectId: "squadvertex2007",
      storageBucket: "squadvertex2007.appspot.com",
      messagingSenderId: "168905083514",
      appId: "1:168905083514:web:c8bbe2ce9f87800a0f09c3",
    };
    
    firebase.initializeApp(firebaseConfig);
    const db          = firebase.firestore();
    const FieldValue  = firebase.firestore.FieldValue;

    // Constants & refs
    const EVENT_ID = 'SpringLaunch2025';
    const eventRef = db.collection('events').doc(EVENT_ID);

    let videoList    = [];
    let currentVideo = null;

    // Initialize UI elements
    const videoListEl = document.getElementById('videoList');
    const toastEl = document.getElementById('toast');
    const toastMessageEl = document.getElementById('toastMessage');
    const localTimeEl = document.getElementById('local-time');
    const connectionStatusEl = document.getElementById('connection-status');
    const videoCountEl = document.getElementById('video-count');
    
    // Schedule elements
    const scheduleListEl = document.getElementById('scheduleList');
    const scheduleTypeEl = document.getElementById('scheduleType');
    const scheduleVideoIdEl = document.getElementById('scheduleVideoId');
    const scheduleDurationEl = document.getElementById('scheduleDuration');
    const scheduleTitleEl = document.getElementById('scheduleTitle');
    
    // Update time display
    function updateTime() {
      const now = new Date();
      const options = { 
        weekday: 'long', 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit',
        timeZoneName: 'short'
      };
      localTimeEl.textContent = now.toLocaleDateString('en-US', options);
    }
    
    // Initialize time display
    updateTime();
    setInterval(updateTime, 1000);
    
    // Toggle form fields based on schedule type
    scheduleTypeEl.addEventListener('change', function() {
      const type = this.value;
      const videoField = document.getElementById('videoIdField');
      const durationField = document.getElementById('durationField');
      
      if (type === 'timer' || type === 'pause' || type === 'voting') {
        videoField.style.display = 'none';
        durationField.style.display = 'block';
      } else {
        videoField.style.display = 'block';
        durationField.style.display = 'none';
      }
    });
    
    // Add to schedule button
    document.getElementById('btnAddScheduleItem').addEventListener('click', function() {
      const type = scheduleTypeEl.value;
      const videoId = scheduleVideoIdEl.value;
      const duration = scheduleDurationEl.value;
      const title = scheduleTitleEl.value || `Schedule Item ${scheduleListEl.children.length + 1}`;
      
      if ((type === 'intro' || type === 'creator_video') && !videoId) {
        showToast('Please select a video for this item', 'warning');
        return;
      }
      
      if ((type === 'timer' || type === 'pause' || type === 'voting') && !duration) {
        showToast('Please enter duration for this item', 'warning');
        return;
      }
      
      // Create new schedule item
      const item = document.createElement('div');
      item.className = 'schedule-item';
      
      // Determine type and styling
      let typeClass = '';
      let typeText = '';
      
      switch(type) {
        case 'timer':
          typeClass = 'type-timer';
          typeText = 'TIMER';
          break;
        case 'intro':
          typeClass = 'type-intro';
          typeText = 'INTRO';
          break;
        case 'creator_video':
          typeClass = 'type-creator';
          typeText = 'CREATOR VIDEO';
          break;
        case 'pause':
          typeClass = 'type-pause';
          typeText = 'PAUSE';
          break;
        case 'voting':
          typeClass = 'type-voting';
          typeText = 'VOTING';
          break;
      }
      
      // Get video title if available
      let videoTitle = '';
      if (videoId) {
        const videoOption = scheduleVideoIdEl.querySelector(`option[value="${videoId}"]`);
        if (videoOption) {
          videoTitle = videoOption.textContent;
        }
      }
      
      item.innerHTML = `
        <div class="schedule-type ${typeClass}">${typeText}</div>
        <div class="schedule-details">
          <h4>${title}</h4>
          <p class="schedule-duration">
            ${type === 'timer' || type === 'pause' || type === 'voting' 
              ? `Duration: ${duration} minutes` 
              : `Video: ${videoTitle}`}
          </p>
        </div>
        <div class="schedule-actions">
          <button class="schedule-btn"><i class="fas fa-edit"></i></button>
          <button class="schedule-btn"><i class="fas fa-trash"></i></button>
        </div>
      `;
      
      // Add delete functionality
      const deleteBtn = item.querySelector('.schedule-actions .fa-trash').closest('button');
      deleteBtn.addEventListener('click', function() {
        item.remove();
        showToast('Schedule item removed', 'success');
      });
      
      // Add to schedule
      scheduleListEl.appendChild(item);
      showToast('Item added to schedule', 'success');
      
      // Reset form
      scheduleTitleEl.value = '';
    });
    
    // Save schedule button
    document.getElementById('btnSaveSchedule').addEventListener('click', function() {
      // In a real implementation, this would save to Firebase
      showToast('Schedule saved successfully!', 'success');
    });
    
    // ── Initialize admin listeners on page load ───────────────────────────────
    document.addEventListener('DOMContentLoaded', function() {
      // Update connection status
      connectionStatusEl.textContent = "Connecting to Firebase...";
      
      // Simulate loading videos
      setTimeout(function() {
        connectionStatusEl.textContent = "Connected to Firebase";
        
        // Add sample videos
        const videos = [
          { id: 'abc123', title: 'SquadVertex Intro', thumbnail: 'https://via.placeholder.com/140x80?text=Intro+Video' },
          { id: 'def456', title: 'Creator 1 Presentation', thumbnail: 'https://via.placeholder.com/140x80?text=Creator+1' },
          { id: 'ghi789', title: 'Creator 2 Showcase', thumbnail: 'https://via.placeholder.com/140x80?text=Creator+2' },
          { id: 'jkl012', title: 'Final Voting Session', thumbnail: 'https://via.placeholder.com/140x80?text=Voting' }
        ];
        
        renderVideoList(videos);
        
        // Populate schedule video selector
        videos.forEach(video => {
          const option = document.createElement('option');
          option.value = video.id;
          option.textContent = video.title;
          scheduleVideoIdEl.appendChild(option);
        });
      }, 1500);
    });

    // ── Render video list ────────────────────────────────────────────────────
    function renderVideoList(videos) {
      videoListEl.innerHTML = '';
      totalCountEl.textContent = videos.length;
      videoCountEl.textContent = `${videos.length} ${videos.length === 1 ? 'video' : 'videos'}`;
      
      if (videos.length === 0) {
        videoListEl.innerHTML = `
          <div class="no-videos">
            <i class="fas fa-video-slash" style="font-size: 3rem; margin-bottom: 1rem; color: #d0d5dd;"></i>
            <p>No videos added yet</p>
            <p>Add a video using the form above</p>
          </div>
        `;
        return;
      }
      
      // Create a document fragment for efficient rendering
      const fragment = document.createDocumentFragment();
      
      videos.forEach(video => {
        // Create card element
        const card = document.createElement('div');
        card.className = 'video-card';
        
        // Build card content
        card.innerHTML = `
          <div class="video-thumb">
            <img src="${video.thumbnail}" alt="${video.title}">
            <div class="video-status inactive">
              <span class="status-dot"></span>
              INACTIVE
            </div>
          </div>
          <div class="video-meta">
            <h3>${video.title}</h3>
            <p><strong>ID:</strong> ${video.id}</p>
            <div class="stats-grid">
              <div class="stat-box">
                <div class="stat-value">0</div>
                <div class="stat-label">👍 Likes</div>
              </div>
              <div class="stat-box">
                <div class="stat-value">0</div>
                <div class="stat-label">👎 Dislikes</div>
              </div>
              <div class="stat-box">
                <div class="stat-value">0</div>
                <div class="stat-label">💬 Comments</div>
              </div>
            </div>
          </div>
          <div class="video-actions">
            <button class="action-btn preview-btn">
              <i class="fas fa-eye"></i> Preview
            </button>
            <button class="action-btn remove-btn">
              <i class="fas fa-trash"></i> Remove
            </button>
          </div>
        `;
        
        fragment.appendChild(card);
      });
      
      videoListEl.appendChild(fragment);
      
      // Update view count
      viewCountEl.textContent = videos.length * 5; // Simulated view count
    }

    // Toast notification
    function showToast(message, type = 'success') {
      toastMessageEl.textContent = message;
      
      // Set type-specific styling
      if (type === 'error') {
        toastEl.style.background = 'var(--danger)';
        toastEl.querySelector('i').className = 'fas fa-exclamation-circle';
      } else if (type === 'warning') {
        toastEl.style.background = 'var(--warning)';
        toastEl.querySelector('i').className = 'fas fa-exclamation-triangle';
      } else {
        toastEl.style.background = 'var(--success)';
        toastEl.querySelector('i').className = 'fas fa-check-circle';
      }
      
      // Show toast
      toastEl.classList.add('show');
      
      // Hide after delay
      setTimeout(() => {
        toastEl.classList.remove('show');
      }, 3000);
    }
  </script>
</body>
</html>