<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Galaxy Portfolio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
  <style>
    html, body {
      padding: 0; margin: 0;
      background: #181f2b;
      color: #fff;
      font-family: Arial, sans-serif;
      width: 100%; min-height: 100vh;
    }
    body { box-sizing: border-box; }

    /* Header/footer CSS copied from your snippet */
    .top-bar { display: flex; align-items: center; justify-content: space-between; height: 90px; background: rgba(16,23,36,0.85); padding: 0 40px; backdrop-filter: blur(10px); border-bottom: 1px solid rgba(255,255,255,0.1); position: sticky; top: 0; z-index: 100; }
    .logo-title { display: flex; align-items: center; gap: 15px; font-size: 1.8rem; font-weight: bold; font-family: 'Montserrat', sans-serif; color: #fff; }
    .logo-title img { height: 90px; filter: drop-shadow(0 0 8px rgba(97,218,251,0.7)); }
    .nav-buttons { display: flex; align-items: center; gap: 30px; font-size: 1.1rem; position: relative; }
    .nav-btn, .profile-btn { background: none; border: none; color: #e0e0e0; cursor: pointer; font-size: 1rem; position: relative; font-family: 'Poppins', sans-serif; font-weight: 500; padding: 8px 12px; border-radius: 6px; transition: all 0.3s ease; }
    .nav-btn:hover, .profile-btn:hover { color: #64c2ff; background: rgba(255,255,255,0.05); }
    .profile-btn img { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; border: 2px solid #64c2ff; }
    .dropdown-content { display: none; position: absolute; right: 0; background: rgba(29,35,54,0.95); min-width: 160px; border-radius: 8px; box-shadow: 0 8px 24px rgba(0,0,0,0.2); top: 50px; z-index: 1000; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); overflow: hidden; }
    .dropdown-content a { color: #e0e0e0; padding: 12px 16px; text-decoration: none; display: block; border-bottom: 1px solid rgba(255,255,255,0.05); transition: all 0.2s ease; }
    .dropdown-content a:last-child { border-bottom: none; }
    .dropdown-content a:hover { background: rgba(100,194,255,0.1); color: #64c2ff; }
    .nav-buttons .more-options:hover .dropdown-content,
    .nav-buttons .profile-btn.show-menu + .dropdown-content { display: block; }

    /* Banner */
    .banner-img-section {
      width: 100%; height: 400px; background: #23263a;
      display: flex; align-items: flex-end; justify-content: flex-start;
      position: relative; overflow: hidden; z-index: 2;
    }
    .banner-img-section img {
      width: 100%; height: 100%; object-fit: cover; display: block;
      border-bottom: 2px solid rgba(255,255,255,0.07);
    }

    /* Portfolio main */
    .portfolio-section {
      max-width: 1240px;
      margin: 56px auto 60px auto;
      padding: 0 20px;
      display: flex;
      flex-direction: column;
      gap: 72px;
    }
    /* Each category row container */
    .category-row {
      display: flex;
      gap: 56px;
      align-items: center;
      justify-content: stretch;
      flex-wrap: wrap;
    }
    /* Even row swap */
    .category-row.even { flex-direction: row-reverse; }

    /* Left pane: Title + Desc */
    .cat-text {
      flex: 1 1 360px;
      max-width: 420px;
    }
    .cat-text h2 {
      color: #fab84f;
      font-weight: 700;
      font-size: 2.5rem;
      margin: 0 0 18px 0;
      line-height: 1.1;
      word-break: break-word;
      letter-spacing: 1px;
      user-select: none;
    }
    .cat-text p {
      font-size: 1.15rem;
      line-height: 1.6;
      color: #d6d6d6;
      user-select: text;
      white-space: pre-wrap;
    }

    /* Right pane: Images grid */
    .cat-images {
      flex: 1.8 1 680px;
      display: grid;
      grid-template-columns: repeat(auto-fill,minmax(160px,1fr));
      gap: 18px 14px;
      justify-items: center;
      align-items: center;
    }
    .cat-images img {
      width: 160px;
      height: 140px;
      object-fit: cover;
      border-radius: 14px;
      box-shadow: 0 6px 20px #121b38cc;
      cursor: pointer;
      transition: transform 0.22s ease;
    }
    .cat-images img:hover {
      transform: scale(1.05);
      box-shadow: 0 7px 32px #1d2b64bb;
    }

    /* Modal styles */
    .modal-bg {
      position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
      background: rgba(25,30,47,0.96);
      display: flex; align-items: center; justify-content: center;
      z-index: 99;
      animation: fadeInModal 0.25s ease forwards;
    }
    @keyframes fadeInModal {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .modal-gallery {
      background: #191e2a;
      border-radius: 22px;
      padding: 32px 28px 38px 28px;
      max-width: 900px;
      max-height: 88vh;
      overflow-y: auto;
      position: relative;
      display: flex; flex-direction: column; align-items: center;
      gap: 26px;
      box-shadow: 0 7px 51px #23294fbd;
    }
    .modal-gallery-title {
      font-size: 1.78rem;
      font-weight: 700;
      color: #fab84f;
      letter-spacing: 1px;
      margin-bottom: 12px;
      text-align: center;
      user-select: none;
    }
    .modal-category-switch {
      width: 100%;
      display: flex;
      justify-content: space-between;
      margin-bottom: 12px;
    }
    .modal-switch-btn {
      background: #fab84f;
      color: #23263a;
      font-weight: 700;
      border: none;
      padding: 10px 30px;
      border-radius: 8px;
      font-size: 1.1rem;
      cursor: pointer;
      user-select: none;
      letter-spacing: 0.03em;
      transition: background 0.22s ease;
    }
    .modal-switch-btn:hover {
      background: #64c2ff;
      color: white;
    }
    .modal-gallery-images {
      display: flex;
      flex-wrap: wrap;
      gap: 20px 16px;
      justify-content: center;
      align-items: center;
      overflow-wrap: break-word;
    }
    .modal-gallery-images img {
      max-height: 180px;
      width: auto;
      border-radius: 14px;
      box-shadow: 0 4px 31px #22345c9d;
      cursor: pointer;
      object-fit: contain;
      transition: transform 0.21s ease;
    }
    .modal-gallery-images img:hover {
      transform: scale(1.08);
      box-shadow: 0 5px 38px #2b3f6cda;
    }
    .modal-close-btn {
      position: absolute;
      top: 21px;
      right: 28px;
      font-size: 2.4rem;
      background: none;
      border: none;
      color: #ecececcc;
      cursor: pointer;
      user-select: none;
      font-weight: 600;
      transition: color 0.22s ease;
      z-index: 10;
    }
    .modal-close-btn:hover { color: #fab84f; }

    @media (max-width: 900px) {
      .portfolio-section { margin: 48px 8px 60px 8px; }
      .category-row { flex-direction: column !important; gap: 32px; }
      .cat-text, .cat-images { max-width: 100%; flex-basis: 100%; }
      .cat-images { grid-template-columns: repeat(auto-fill,minmax(140px,1fr)); }
      .cat-text h2 { font-size: 1.45rem; }
      .modal-gallery { max-width: 90vw; padding: 12px 24px; max-height: 90vh; }
      .modal-gallery-images img { max-height: 140px; max-width: 100%; }
      .modal-switch-btn { padding: 10px 22px; font-size: 1rem; }
    }
  </style>
</head>
<body>
  <!-- HEADER -->
  <div class="top-bar">
    <div class="logo-title">
      <img src="https://dl.dropboxusercontent.com/scl/fi/ulfs6ygkeyvr4mar8bkuz/galaxwbewh.png?rlkey=jq9buj80ny6et6jfbfpiuf14l&st=lwkqobqi&dl=0" height="46" alt="Logo" />
      GalaxyWeb
    </div>
    <div class="nav-buttons">
      <button class="nav-btn">Home</button>
      <button class="nav-btn">Team Galaxy</button>
      <div class="more-options">
        <button class="nav-btn">More ▼</button>
        <div class="dropdown-content">
          <a href="#">Blog</a>
          <a href="#">Posts</a>
          <a href="#">Portfolio</a>
        </div>
      </div>
      <button id="profileBtn" class="profile-btn"><i class="fa-solid fa-user"></i></button>
      <div id="profileMenu" class="dropdown-content" style="right: 30px; display:none;">
        <a href="#" id="profileLink">Profile</a>
        <a href="#" id="logoutLink">Logout</a>
      </div>
    </div>
  </div>
  <script>
    const profileBtn = document.getElementById("profileBtn");
    const profileMenu = document.getElementById("profileMenu");
    profileBtn.addEventListener("click", (e) => { e.stopPropagation(); profileMenu.style.display = profileMenu.style.display === "block" ? "none" : "block"; });
    window.addEventListener("click", () => { profileMenu.style.display = "none"; });
  </script>

  <!-- Banner -->
  <section class="banner-img-section">
    <img src="https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=1200&q=80" alt="Banner" />
  </section>

  <main>
    <div class="portfolio-section" id="portfolioSection">
      <!-- Category rows appended via JS -->
    </div>
  </main>

  <!-- Modal -->
  <div id="portfolioModal" style="display:none;"></div>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="footer-col">
      <div class="footer-about-title">About TeamGalaxy</div>
      <div class="footer-about-text">
        TeamGalaxy is an innovative gaming and creative community, united by passion and the spirit of collaboration. 
        We host tournaments, share design ideas, and grow talents together — join now to explore the Galaxy!
      </div>
      <div class="footer-social">
        <a href="https://twitter.com" title="Twitter"><i class="fab fa-twitter"></i></a>
        <a href="https://facebook.com" title="Facebook"><i class="fab fa-facebook"></i></a>
        <a href="https://instagram.com" title="Instagram"><i class="fab fa-instagram"></i></a>
        <a href="https://youtube.com" title="YouTube"><i class="fab fa-youtube"></i></a>
        <a href="https://discord.com" title="Discord"><i class="fab fa-discord"></i></a>
      </div>
    </div>
    <div class="footer-col">
      <div class="footer-links-col">
        <a href="#">Privacy Policy</a>
        <a href="#">Terms & Conditions</a>
        <a href="#">Other</a>
      </div>
      <div class="address-section">
        <div class="address-title">Our Address</div>
        <div class="address-text">
          44 Galaxy St, Universe City, WebLand<br>
          Phone: +91-9876543210<br>
          Email: support@gmail.com<br>
          Working Hours: Mon-Sat 10am - 10pm
        </div>
      </div>
    </div>
  </footer>

  <!-- Firebase and AppCheck -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-check-compat.js"></script>
  <script src="https://www.google.com/recaptcha/api.js?render=6Ld395IrAAAAAIvG4gyf0vUJeI_jKOsI9XVn0jUx"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBV7Jg0BVzeCNQW9oiIiNItnejUsjj2DhA",
      authDomain: "squadvertex2007.firebaseapp.com",
      projectId: "squadvertex2007",
      storageBucket: "squadvertex2007.appspot.com",
      messagingSenderId: "168905083514",
      appId: "1:168905083514:web:c8bbe2ce9f87800a0f09c3"
    };
    firebase.initializeApp(firebaseConfig);
    try {
      const appCheckProvider = new firebase.appCheck.ReCaptchaV3Provider('6Ld395IrAAAAAIvG4gyf0vUJeI_jKOsI9XVn0jUx');
      firebase.appCheck().activate(appCheckProvider, true);
    } catch (e) { console.warn('App Check activation failed:', e);}
    const db = firebase.firestore();

    let portfolioCategories = [];
    let categoriesImagesCache = {};

    // Create a single category row with correct layout (swap odd/even)
    function createCategoryRow(index, title, description, images) {
      const row = document.createElement("div");
      row.className = `category-row ${index % 2 === 1 ? "even" : "odd"}`;

      // Text container
      const textDiv = document.createElement("div");
      textDiv.className = "cat-text";
      textDiv.innerHTML = `<h2>${title}</h2><p>${description}</p>`;

      // Images container
      const imagesDiv = document.createElement("div");
      imagesDiv.className = "cat-images";
      images.forEach((url, i) => {
        const img = document.createElement("img");
        img.src = url;
        img.alt = `${title} - image ${i + 1}`;
        img.tabIndex = 0;
        img.style.userSelect = "none";
        imagesDiv.appendChild(img);
      });

      if (index % 2 === 0) {
        row.appendChild(textDiv);
        row.appendChild(imagesDiv);
      } else {
        row.appendChild(imagesDiv);
        row.appendChild(textDiv);
      }
      return row;
    }

    // Load categories (portfolio docs) and their images
    async function loadPortfolio() {
      const container = document.getElementById("portfolioSection");
      container.innerHTML = "Loading...";

      const snapshot = await db.collection("portfolio").get();
      portfolioCategories = snapshot.docs.map(doc => ({
        id: doc.id,
        title: doc.data().title || doc.id,
        description: doc.data().description || "",
      }));

      container.innerHTML = "";

      for (let i = 0; i < portfolioCategories.length; i++) {
        const cat = portfolioCategories[i];
        // fetch subcollection images urls
        let imagesUrls = [];
        const imagesSnap = await db.collection("portfolio").doc(cat.id).collection("images").get();
        imagesUrls = imagesSnap.docs.map(d => d.data().url);
        categoriesImagesCache[cat.id] = imagesUrls;

        const catRow = createCategoryRow(i, cat.title, cat.description, imagesUrls);
        container.appendChild(catRow);
      }
    }

    window.onload = loadPortfolio;
  </script>
</body>
</html>
