<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Daily Inspiration & Routine Tracker</title>
  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #4e54c8;
      --secondary: #8f94fb;
      --accent: #ff6a88;
      --text: #333;
      --bg: #f5f7fa;
      --card-bg: #ffffff;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0; padding: 0;
      font-family: 'Montserrat', sans-serif;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: var(--text);
      display: flex; align-items: center; justify-content: center;
      min-height: 100vh;
    }
    #main {
      width: 90%; max-width: 520px;
      background: var(--card-bg);
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.15);
      overflow: hidden;
      animation: popIn 0.6s ease-out;
    }
    @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    .header {
      background: var(--accent);
      color: #fff; padding: 20px; text-align: center;
    }
    .header h1 { margin: 0; font-weight: 400; }
    .quote {
      margin: 20px; font-style: italic; font-size: 1.1em;
      text-align: center; position: relative;
    }
    .quote::before, .quote::after {
      content: '“'; position: absolute; font-size: 2em;
      color: var(--accent);
    }
    .quote::after { content: '”'; right: 20px; bottom: -10px; }
    #streak {
      text-align: center; font-size: 1.2em; margin: 10px 0; font-weight: 600;
    }
    .actions {
      display: flex; justify-content: space-around; margin: 20px;
    }
    .actions button {
      flex: 1; margin: 0 10px; padding: 12px;
      border: none; border-radius: 6px;
      font-size: 1em; font-weight: 600;
      cursor: pointer; transition: transform 0.2s;
    }
    .actions button:hover { transform: translateY(-3px); }
    .yes { background: #4caf50; color: #fff; }
    .no { background: #f44336; color: #fff; }
    .actions button:disabled {
      background: #ccc; cursor: not-allowed; transform: none;
    }
    #history {
      max-height: 180px; overflow-y: auto; margin: 0 20px 20px;
      border-radius: 6px; background: var(--bg);
    }
    #history table { width: 100%; border-collapse: collapse; }
    #history th, #history td { padding: 8px; text-align: center; }
    #history tr:nth-child(even) { background: #e9ecef; }
    #chartContainer {
      padding: 0 20px 20px;
    }
  </style>
</head>
<body>
  <div id="main">
    <div class="header">
      <h1>Daily Inspiration</h1>
    </div>
    <div class="quote" id="quote">Loading inspiration...</div>
    <div id="streak">Your current streak: <span id="streakCount">0</span> days</div>
    <div class="actions">
      <button class="yes" id="markYes">Yes</button>
      <button class="no" id="markNo">No</button>
    </div>
    <div id="history">
      <table>
        <thead><tr><th>Date</th><th>Status</th></tr></thead>
        <tbody id="historyBody"></tbody>
      </table>
    </div>
    <div id="chartContainer">
      <canvas id="chart"></canvas>
    </div>
  </div>
  <script>
    // Firebase config
    const firebaseConfig = { apiKey: "AIzaSyBV7Jg0BVzeCNQW9oiI...", authDomain: "squadvertex2007.firebaseapp.com", projectId: "squadvertex2007", storageBucket: "squadvertex2007.appspot.com", messagingSenderId: "168905083514", appId: "1:168905083514:web:c8bbe2ce9f87800a0f09c3" };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();const email = 'me@myemail.com'; // personal use only
const quotes = [
  "No matter what we build—let's never forget who we’re building it for.",
  "Some people seek peace in silence. I found mine in a smile I’ve never met.",
  "Every evening, I carry your hope like a lantern through the night.",
  "In each sunrise I see the promise of a new reason to smile for you."
];

function formatDate(d) { return d.toISOString().split('T')[0]; }
function randomQuote() { return quotes[Math.floor(Math.random()*quotes.length)]; }

async function loadData() {
  document.getElementById('quote').innerText = randomQuote();
  const recRef = db.collection('routines').doc(email).collection('records');
  const snap = await recRef.orderBy('date','desc').limit(7).get();
  const records = snap.docs.map(d=>d.data());
  // history
  const tbody = document.getElementById('historyBody'); tbody.innerHTML = '';
  records.forEach(r=> tbody.innerHTML += `<tr><td>${r.date}</td><td>${r.status}</td></tr>`);
  // streak
  let streak=0, d=new Date();
  while(true) {
    const key = formatDate(d);
    if(records.find(r=>r.date===key && r.status==='Yes')) {
      streak++; d.setDate(d.getDate()-1);
    } else break;
  }
  document.getElementById('streakCount').innerText = streak;
  // chart
  const labels = records.map(r=>r.date).reverse();
  const data = records.map(r=> r.status==='Yes'?1:0).reverse();
  new Chart(document.getElementById('chart'), {
    type: 'bar',
    data: { labels, datasets: [{ data, backgroundColor: data.map(v=> v?'#4caf50':'#f44336') }] },
    options: { scales:{ y:{ beginAtZero:true, max:1, ticks:{ stepSize:1 } } }, plugins:{ legend:{ display:false } } }
  });
}

function mark(status) {
  const date = formatDate(new Date());
  db.collection('routines').doc(email).collection('records').doc(date)
    .set({ date, status, timestamp: firebase.firestore.FieldValue.serverTimestamp() })
    .then(loadData);
}

document.getElementById('markYes').onclick = ()=>mark('Yes');
document.getElementById('markNo').onclick = ()=>mark('No');

window.onload = loadData;

  </script>
</body>
</html>